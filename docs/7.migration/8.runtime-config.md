---
title: "Runtime-конфигурация"
description: "Миграция runtime-конфигурации с Nuxt 2 на Nuxt 3."
---

Чтобы использовать переменные окружения в приложении Nuxt 3, нужен runtime config.

В компонентах используйте композабл [`useRuntimeConfig`](/docs/4.x/api/composables/use-runtime-config) в setup (или в плагине Nuxt).

В коде в `server/` композабл [`useRuntimeConfig`](/docs/4.x/api/composables/use-runtime-config) доступен без импорта.

:read-more{to="/docs/4.x/guide/going-further/runtime-config"}

## Миграция

1. Перенесите используемые переменные окружения в свойство `runtimeConfig` в `nuxt.config`.
2. Замените `process.env` на [`useRuntimeConfig`](/docs/4.x/api/composables/use-runtime-config) во всей Vue-части приложения.

::code-group

```ts [nuxt.config.ts]
export default defineNuxtConfig({
  runtimeConfig: {
    // Приватный конфиг, только на сервере
    apiSecret: '123',
    // public доступен и на клиенте
    public: {
      apiBase: '/api',
    },
  },
})
```

```vue [app/pages/index.vue]
<script setup lang="ts">
const config = useRuntimeConfig()

// вместо process.env используйте config.public.apiBase
console.log(config.public.apiBase)
</script>
```

```ts [server/api/hello.ts]
export default defineEventhandler((event) => {
  const config = useRuntimeConfig(event)
  // На сервере доступны config.apiSecret и config.public
  console.log(config.apiSecret)
  console.log(config.public.apiBase)
})
```

```ini [.env]
# Значения runtime config подставляются из переменных окружения при запуске
NUXT_API_SECRET=api_secret_token
NUXT_PUBLIC_API_BASE=https://nuxtjs.org
```

::
