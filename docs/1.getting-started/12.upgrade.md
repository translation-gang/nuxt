---
title: –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—é
description: '–£–∑–Ω–∞–π—Ç–µ, –∫–∞–∫ –ø–µ—Ä–µ–π—Ç–∏ –Ω–∞ –ø–æ—Å–ª–µ–¥–Ω—é—é –≤–µ—Ä—Å–∏—é Nuxt.'
navigation.icon: i-ph-arrow-circle-up
---

## –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Nuxt

### –ü–æ—Å–ª–µ–¥–Ω–∏–π —Ä–µ–ª–∏–∑

–ß—Ç–æ–±—ã –æ–±–Ω–æ–≤–∏—Ç—å Nuxt –¥–æ [–ø–æ—Å–ª–µ–¥–Ω–µ–π –≤–µ—Ä—Å–∏–∏](https://github.com/nuxt/nuxt/releases), –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—É `nuxi upgrade`.

::package-managers

```bash [npm]
npx nuxi upgrade
```

```bash [yarn]
yarn dlx nuxi upgrade
```

```bash [pnpm]
pnpm dlx nuxi upgrade
```

```bash [bun]
bun x nuxi upgrade
```

::

### –ö–∞–Ω–∞–ª –Ω–æ—á–Ω—ã—Ö —Ä–µ–ª–∏–∑–æ–≤ (Nightly Release)

–ß—Ç–æ–±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–æ—Å–ª–µ–¥–Ω—é—é —Å–±–æ—Ä–∫—É Nuxt –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏ –¥–æ –∏—Ö –≤—ã—Ö–æ–¥–∞, –æ–∑–Ω–∞–∫–æ–º—å—Ç–µ—Å—å —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ [–∫–∞–Ω–∞–ª–µ –Ω–æ—á–Ω—ã—Ö —Ä–µ–ª–∏–∑–æ–≤](/docs/guide/going-further/nightly-release-channel).

::alert{type="warning"}
–í –Ω–∞—Å—Ç–æ—è—â–µ–µ –≤—Ä–µ–º—è —Ç–µ–≥ `latest` –∫–∞–Ω–∞–ª–∞ –Ω–æ—á–Ω—ã—Ö —Ä–µ–ª–∏–∑–æ–≤ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –≤–µ—Ç–∫—É Nuxt v4, –∞ —ç—Ç–æ –∑–Ω–∞—á–∏—Ç, —á—Ç–æ —Å–µ–π—á–∞—Å –≤ –Ω–µ–π –æ—Å–æ–±–µ–Ω–Ω–æ –≤–µ—Ä–æ—è—Ç–Ω—ã –∏–∑–º–µ–Ω–µ–Ω–∏—è - –±—É–¥—å—Ç–µ –æ—Å—Ç–æ—Ä–æ–∂–Ω—ã!

–í—ã –º–æ–∂–µ—Ç–µ –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –Ω–æ—á–Ω—ã–º —Ä–µ–ª–∏–∑–∞–º –≤–µ—Ç–∫–∏ 3.x —Å –ø–æ–º–æ—â—å—é —Ç–µ–≥–∞ `"nuxt": "npm:nuxt-nightly@3x"`.
::

## –¢–µ—Å—Ç–∏—Ä—É–µ–º Nuxt 4

–î–∞—Ç–∞ –≤—ã—Ö–æ–¥–∞ Nuxt 4 –±—É–¥–µ—Ç **–æ–±—ä—è–≤–ª–µ–Ω–∞** –ø–æ–∑–¥–Ω–µ–µ. –û–Ω–∞ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –Ω–∞–ª–∏—á–∏—è –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –ø–æ—Å–ª–µ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Ä–µ–ª–∏–∑–∞ Nitro –¥–ª—è —Ç—â–∞—Ç–µ–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å–æ–æ–±—â–µ—Å—Ç–≤–æ–º. –í—ã –º–æ–∂–µ—Ç–µ —Å–ª–µ–¥–∏—Ç—å –∑–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å–æ–º –≤—ã—Ö–æ–¥–∞ Nitro –≤ [—ç—Ç–æ–º PR](https://github.com/unjs/nitro/pull/2521).

–î–æ –≤—ã—Ö–æ–¥–∞ —Ä–µ–ª–∏–∑–∞ –º–Ω–æ–≥–∏–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –≤–æ–π–¥—É—Ç –≤ Nuxt 4, —É–∂–µ –º–æ–∂–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ –≤–µ—Ä—Å–∏—è—Ö Nuxt 3.12 –∏ –≤—ã—à–µ.

::tip{icon="i-ph-video" to="https://www.youtube.com/watch?v=r4wFKlcJK6c" target="_blank"}
–ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –≤–∏–¥–µ–æ –æ—Ç –ê–ª–µ–∫—Å–∞–Ω–¥—Ä–∞ –õ–∏—Ö—Ç–µ—Ä–∞, –≤ –∫–æ—Ç–æ—Ä–æ–º —Ä–∞—Å—Å–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –æ —Ç–æ–º, –∫–∞–∫ —É–∂–µ —Å–µ–π—á–∞—Å –≤–Ω–µ–¥—Ä–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è Nuxt 4.
::

### –í–Ω–µ–¥—Ä–µ–Ω–∏–µ Nuxt 4

–ü–µ—Ä–≤—ã–º —à–∞–≥–æ–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –æ–±–Ω–æ–≤–∏—Ç—å Nuxt –¥–æ [–ø–æ—Å–ª–µ–¥–Ω–µ–π –≤–µ—Ä—Å–∏–∏](https://github.com/nuxt/nuxt/releases).

–ó–∞—Ç–µ–º –≤—ã –º–æ–∂–µ—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `compatibilityVersion` –¥–ª—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –ø–æ–≤–µ–¥–µ–Ω–∏—é Nuxt 4:

```ts twoslash [nuxt.config.ts]
export default defineNuxtConfig({
  future: {
    compatibilityVersion: 4,
  },
  // –ß—Ç–æ–±—ã —Å–Ω–æ–≤–∞ –≤–∫–ª—é—á–∏—Ç—å –≤—Å–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ Nuxt v3, —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:
  // srcDir: '.',
  // dir: {
  //   app: 'app'
  // },
  // experimental: {
  //   scanPageMeta: 'after-resolve',
  //   sharedPrerenderData: false,
  //   compileTemplate: true,
  //   resetAsyncDataToUndefined: true,
  //   templateUtils: true,
  //   relativeWatchPaths: true,
  //   normalizeComponentNames: false
  //   defaults: {
  //     useAsyncData: {
  //       deep: true
  //     }
  //   }
  // },
  // unhead: {
  //   renderSSRHeadOptions: {
  //     omitLineBreaks: false
  //   }
  // }
})
```

–ö–æ–≥–¥–∞ –≤—ã —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ `compatibilityVersion` –≤ `4`, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤–æ –≤—Å–µ–π –≤–∞—à–µ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Nuxt –∏–∑–º–µ–Ω—è—Ç—Å—è, —á—Ç–æ–±—ã –≤—ã–±—Ä–∞—Ç—å –ø–æ–≤–µ–¥–µ–Ω–∏–µ Nuxt v4, –Ω–æ –≤—ã –º–æ–∂–µ—Ç–µ –≤—ã–±–æ—Ä–æ—á–Ω–æ –≤–∫–ª—é—á–∏—Ç—å –ø–æ–≤–µ–¥–µ–Ω–∏–µ Nuxt v3 –ø—Ä–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏, —Å–ª–µ–¥—É—è –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–º —Å—Ç—Ä–æ–∫–∞–º –≤—ã—à–µ. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–∏—à–∏—Ç–µ –æ –ø—Ä–æ–±–ª–µ–º–∞—Ö, —á—Ç–æ–±—ã –º—ã –º–æ–≥–ª–∏ —Ä–µ—à–∏—Ç—å –∏—Ö –≤ Nuxt –∏–ª–∏ –≤ —ç–∫–æ—Å–∏—Å—Ç–µ–º–µ.

### –ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ Nuxt 4

–õ–æ–º–∞—é—â–∏–µ –∏–ª–∏ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è, –∞ —Ç–∞–∫–∂–µ —à–∞–≥–∏ –ø–æ –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –æ–±—Ä–∞—Ç–Ω–æ–π/–ø—Ä—è–º–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏, –±—É–¥—É—Ç –æ—Ç–º–µ—á–µ–Ω—ã –∑–¥–µ—Å—å.

::alert
–≠—Ç–æ—Ç —Ä–∞–∑–¥–µ–ª –º–æ–∂–µ—Ç –±—ã—Ç—å –∏–∑–º–µ–Ω–µ–Ω –¥–æ –≤—ã—Ö–æ–¥–∞ —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ —Ä–µ–ª–∏–∑–∞, –ø–æ—ç—Ç–æ–º—É —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç–µ Nuxt 4, –∏—Å–ø–æ–ª—å–∑—É—è `compatibilityVersion: 4`.
::

#### –ú–∏–≥—Ä–∞—Ü–∏—è —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Codemod

To facilitate the upgrade process, we have collaborated with the [Codemod](https://github.com/codemod-com/codemod) team to automate many migration steps with some open-source codemods.

::note
If you encounter any issues, please report them to the Codemod team with `npx codemod feedback` üôè
::

For a complete list of Nuxt 4 codemods, detailed information on each, their source, and various ways to run them, visit the [Codemod Registry](https://go.codemod.com/codemod-registry).

You can run all the codemods mentioned in this guide using the following `codemod` recipe:

```bash
npx codemod@latest nuxt/4/migration-recipe
```

This command will execute all codemods in sequence, with the option to deselect any that you do not wish to run. Each codemod is also listed below alongside its respective change and can be executed independently.

#### –ù–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π

üö¶ **–£—Ä–æ–≤–µ–Ω—å –≤–ª–∏—è–Ω–∏—è**: –ó–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã–π

–¢–µ–ø–µ—Ä—å Nuxt –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–æ–≤—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∫–∞—Ç–∞–ª–æ–≥–æ–≤ —Å –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å—é (–µ—Å–ª–∏ Nuxt –æ–±–Ω–∞—Ä—É–∂–∏—Ç, —á—Ç–æ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ —Å—Ç–∞—Ä—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É, –Ω–∞–ø—Ä–∏–º–µ—Ä, –∫–∞—Ç–∞–ª–æ–≥ –≤–µ—Ä—Ö–Ω–µ–≥–æ —É—Ä–æ–≤–Ω—è `pages/`, —Ç–æ –Ω–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –Ω–µ –±—É–¥–µ—Ç –ø—Ä–∏–º–µ–Ω—è—Ç—å—Å—è).

üëâ [–°–º. –ø–æ–ª–Ω—ã–π —Ç–µ–∫—Å—Ç RFC](https://github.com/nuxt/nuxt/issues/26444)

##### –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

* –≤ –Ω–æ–≤–æ–º Nuxt –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `srcDir` —Ç–µ–ø–µ—Ä—å `app/`, –∏ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –≤–µ—â–µ–π —Ä–µ—à–∞–µ—Ç—Å—è –æ—Ç—Ç—É–¥–∞.
* `serverDir` —Ç–µ–ø–µ—Ä—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏–º–µ–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ `<rootDir>/server`, –∞ –Ω–µ `<srcDir>/server`.
* `layers/`, `modules/` –∏ `public/` –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Ä–∞–∑—Ä–µ—à–∞—é—Ç—Å—è –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ `<rootDir>`.
* –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ [Nuxt Content v2.13+](https://github.com/nuxt/content/pull/2649), `content/` —Ä–∞–∑—Ä–µ—à–∞–µ—Ç—Å—è –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ `<rootDir>`
* –¥–æ–±–∞–≤–ª–µ–Ω–∞ –Ω–æ–≤–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è `dir.app`, –≤ –∫–æ—Ç–æ—Ä–æ–π –º—ã –∏—â–µ–º `router.options.ts` –∏ `spa-loading-template.html` - –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —ç—Ç–æ `<srcDir>/`.

<details>

<summary>–ü—Ä–∏–º–µ—Ä —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø–∞–ø–æ–∫ v4.</summary>

```sh
.output/
.nuxt/
app/
  assets/
  components/
  composables/
  layouts/
  middleware/
  pages/
  plugins/
  utils/
  app.config.ts
  app.vue
  router.options.ts
content/
layers/
modules/
node_modules/
public/
server/
  api/
  middleware/
  plugins/
  routes/
  utils/
nuxt.config.ts
```

</details>

üëâ –ë–æ–ª–µ–µ –ø–æ–¥—Ä–æ–±–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ –≤ [PR, —Ä–µ–∞–ª–∏–∑—É—é—â–µ–º —ç—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–∏–µ](https://github.com/nuxt/nuxt/pull/27029).

##### –ü—Ä–∏—á–∏–Ω—ã —Ç–∞–∫–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π

1. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** - —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ –≤—Å–µ–≥–æ –∫–æ–¥–∞ –≤ –∫–æ—Ä–Ω–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –ø—Ä–æ–±–ª–µ–º–∞–º —Å–æ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º/–≤–∫–ª—é—á–µ–Ω–∏–µ–º –ø–∞–ø–æ–∫ `.git/` –∏ `node_modules/` –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—è–º–∏ FS (—Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã), —á—Ç–æ –º–æ–∂–µ—Ç –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –∑–∞–º–µ–¥–ª–∏—Ç—å –∑–∞–ø—É—Å–∫ –Ω–∞ –Ω–µ-Mac –û–°.
2. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å —Ç–∏–ø–æ–≤ –≤ IDE** - `server/` –∏ –æ—Å—Ç–∞–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞—é—Ç –≤ –¥–≤—É—Ö —Å–æ–≤–µ—Ä—à–µ–Ω–Ω–æ —Ä–∞–∑–Ω—ã—Ö –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞—Ö —Å —Ä–∞–∑–Ω—ã–º–∏ –≥–ª–æ–±–∞–ª—å–Ω—ã–º–∏ –∏–º–ø–æ—Ä—Ç–∞–º–∏, –∏ —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ `server/` –Ω–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è _–≤–Ω—É—Ç—Ä–∏_ —Ç–æ–π –∂–µ –ø–∞–ø–∫–∏, —á—Ç–æ –∏ –æ—Å—Ç–∞–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, ‚Äî –≤–∞–∂–Ω—ã–π –ø–µ—Ä–≤—ã–π —à–∞–≥ –∫ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—é —Ö–æ—Ä–æ—à–µ–≥–æ –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è –≤ –≤–∞—à–µ–π IDE.

##### –≠—Ç–∞–ø—ã –º–∏–≥—Ä–∞—Ü–∏–∏

1. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é —Å –∏–º–µ–Ω–µ–º `app/`.
2. –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç–µ –≤ –Ω–µ–µ –ø–∞–ø–∫–∏ `assets/`, `components/`, `composables/`, `layouts/`, `middleware/`, `pages/`, `plugins/` –∏ `utils/`, –∞ —Ç–∞–∫–∂–µ `app.vue`, `error.vue`, `app.config.ts`. –ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –ø–∞–ø–∫–∏ `app/router-options.ts` –∏–ª–∏ `app/spa-loading-template.html`, —ç—Ç–∏ –ø—É—Ç–∏ –æ—Å—Ç–∞—é—Ç—Å—è –ø—Ä–µ–∂–Ω–∏–º–∏.
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–∞–ø–∫–∏ `nuxt.config.ts`, `content/`, `layers/`, `modules/`, `public/` –∏ `server/` –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤–Ω–µ –ø–∞–ø–∫–∏ `app/`, –≤ –∫–æ—Ä–Ω–µ –≤–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞.
4. Remember to update any third-party configuration files to work with the new directory structure, such as your `tailwindcss` or `eslint` configuration (if required - `@nuxtjs/tailwindcss` should automatically configure `tailwindcss` correctly).

::tip
–í—ã –º–æ–∂–µ—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å —ç—Ç—É –º–∏–≥—Ä–∞—Ü–∏—é, –∑–∞–ø—É—Å—Ç–∏–≤ `npx codemod@latest nuxt/4/file-structure`
::

–û–¥–Ω–∞–∫–æ –º–∏–≥—Ä–∞—Ü–∏—è _–Ω–µ —è–≤–ª—è–µ—Ç—Å—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–π_. –ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ç–µ–∫—É—â—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø–∞–ø–æ–∫, Nuxt –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç –µ–µ. (–ï—Å–ª–∏ —ç—Ç–æ –Ω–µ —Ç–∞–∫, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–¥–Ω–∏–º–∏—Ç–µ –≤–æ–ø—Ä–æ—Å.) –ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ - –µ—Å–ª–∏ —É –≤–∞—Å —É–∂–µ –µ—Å—Ç—å _—Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π_ `srcDir`. –í —ç—Ç–æ–º —Å–ª—É—á–∞–µ –≤—ã –¥–æ–ª–∂–Ω—ã –∑–Ω–∞—Ç—å, —á—Ç–æ –≤–∞—à–∏ –ø–∞–ø–∫–∏ `modules/`, `public/` –∏ `server/` –±—É–¥—É—Ç —Ä–∞–∑—Ä–µ—à–µ–Ω—ã –∏–∑ –≤–∞—à–µ–≥–æ `rootDir`, –∞ –Ω–µ –∏–∑ –≤–∞—à–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ `srcDir`. –í—ã –º–æ–∂–µ—Ç–µ –æ—Ç–º–µ–Ω–∏—Ç—å —ç—Ç–æ, –Ω–∞—Å—Ç—Ä–æ–∏–≤ `dir.modules`, `dir.public` –∏ `serverDir`, –µ—Å–ª–∏ –≤–∞–º —ç—Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ.

–í—ã —Ç–∞–∫–∂–µ –º–æ–∂–µ—Ç–µ –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø–∞–ø–æ–∫ v3 —Å –ø–æ–º–æ—â—å—é —Å–ª–µ–¥—É—é—â–µ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:

```ts [nuxt.config.ts]
export default defineNuxtConfig({
  // –≠—Ç–æ –≤–µ—Ä–Ω–µ—Ç –Ω–æ–≤—ã–π srcDir –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏–∑ `app` –æ–±—Ä–∞—Ç–Ω–æ –≤ –≤–∞—à—É –∫–æ—Ä–Ω–µ–≤—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
  srcDir: '.',
  // –≠—Ç–æ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø—Ä–µ—Ñ–∏–∫—Å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –¥–ª—è `app/router.options.ts` –∏ `app/spa-loading-template.html`.
  dir: {
    app: 'app'
  }
})
```

#### Deduplication of Route Metadata

üö¶ **Impact Level**: Minimal

##### What Changed

It's possible to set some route metadata using `definePageMeta`, such as the `name`, `path`, and so on. Previously these were available both on the route and on route metadata (for example, `route.name` and `route.meta.name`).

Now, they are only accessible on the route object.

##### Reasons for Change

This is a result of enabling `experimental.scanPageMeta` by default, and is a performance optimization.

##### Migration Steps

The migration should be straightforward:

```diff
  const route = useRoute()
  
- console.log(route.meta.name)
+ console.log(route.name)
```

#### Normalized Component Names

üö¶ **Impact Level**: Moderate

Vue will now generate component names that match the Nuxt pattern for component naming.

##### What Changed

By default, if you haven't set it manually, Vue will assign a component name that matches
the filename of the component.

```bash [Directory structure]
‚îú‚îÄ components/
‚îú‚îÄ‚îÄ‚îÄ SomeFolder/
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ MyComponent.vue
```

In this case, the component name would be `MyComponent`, as far as Vue is concerned. If you wanted to use `<KeepAlive>` with it, or identify it in the Vue DevTools, you would need to use this name.

But in order to auto-import it, you would need to use `SomeFolderMyComponent`.

With this change, these two values will match, and Vue will generate a component name that matches the Nuxt pattern for component naming.

##### Migration Steps

Ensure that you use the updated name in any tests which use `findComponent` from `@vue/test-utils` and in any `<KeepAlive>` which depends on the name of your component.

Alternatively, for now, you can disable this behaviour with:

```ts twoslash [nuxt.config.ts]
export default defineNuxtConfig({
  experimental: {
    normalizeComponentNames: false
  }
})
```

#### Scan Page Meta After Resolution

üö¶ **Impact Level**: Minimal

##### What Changed

We now scan page metadata (defined in `definePageMeta`) _after_ calling the `pages:extend` hook rather than before.

##### Reasons for Change

This was to allow scanning metadata for pages that users wanted to add in `pages:extend`. We still offer an opportunity to change or override page metadata in a new `pages:resolved` hook.

##### Migration Steps

If you want to override page metadata, do that in `pages:resolved` rather than in `pages:extend`.

```diff
  export default defineNuxtConfig({
    hooks: {
-     'pages:extend'(pages) {
+     'pages:resolved'(pages) {
        const myPage = pages.find(page => page.path === '/')
        myPage.meta ||= {}
        myPage.meta.layout = 'overridden-layout'
      }
    }
  })
```

Alternatively, you can revert to the previous behaviour with:

```ts twoslash [nuxt.config.ts]
export default defineNuxtConfig({
  experimental: {
    scanPageMeta: true
  }
})
```

#### Shared Prerender Data

üö¶ **Impact Level**: Moderate

Vue will now generate component names that match the Nuxt pattern for component naming.

##### What Changed

By default, if you haven't set it manually, Vue will assign a component name that matches
the filename of the component.

```bash [Directory structure]
‚îú‚îÄ components/
‚îú‚îÄ‚îÄ‚îÄ SomeFolder/
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ MyComponent.vue
```

In this case, the component name would be `MyComponent`, as far as Vue is concerned. If you wanted to use `<KeepAlive>` with it, or identify it in the Vue DevTools, you would need to use this name.

But in order to auto-import it, you would need to use `SomeFolderMyComponent`.

With this change, these two values will match, and Vue will generate a component name that matches the Nuxt pattern for component naming.

##### Migration Steps

Ensure that you use the updated name in any tests which use `findComponent` from `@vue/test-utils` and in any `<KeepAlive>` which depends on the name of your component.

Alternatively, for now, you can disable this behaviour with:

```ts twoslash [nuxt.config.ts]
export default defineNuxtConfig({
  experimental: {
    normalizeComponentNames: false
  }
})
```

#### –û–±—â–∏–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–µ—Ä–µ–Ω–¥–µ—Ä–∞

üö¶ **–£—Ä–æ–≤–µ–Ω—å –≤–æ–∑–¥–µ–π—Å—Ç–≤–∏—è**: –°—Ä–µ–¥–Ω–∏–π

##### –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

–ú—ã –≤–∫–ª—é—á–∏–ª–∏ —Ä–∞–Ω–µ–µ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω—É—é –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ–±–º–µ–Ω–∞ –¥–∞–Ω–Ω—ã–º–∏ –∏–∑ –≤—ã–∑–æ–≤–æ–≤ `useAsyncData` –∏ `useFetch` –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö. –°–º. [–æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π PR](https://github.com/nuxt/nuxt/pull/24894).

##### –ü—Ä–∏—á–∏–Ω—ã —Ç–∞–∫–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π

–≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞–∑–¥–µ–ª—è–µ—Ç _–¥–∞–Ω–Ω—ã–µ_ –º–µ–∂–¥—É —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º–∏, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–¥–≤–µ—Ä–≥–∞—é—Ç—Å—è –ø—Ä–µ—Ä–µ–Ω–¥–µ—Ä—É. –≠—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–º—É –ø–æ–≤—ã—à–µ–Ω–∏—é –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –ø—Ä–∏ –ø—Ä–µ–¥—Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–µ —Å–∞–π—Ç–æ–≤, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏—Ö `useAsyncData` –∏–ª–∏ `useFetch` –∏ –ø–æ–ª—É—á–∞—é—â–∏—Ö –æ–¥–Ω–∏ –∏ —Ç–µ –∂–µ –¥–∞–Ω–Ω—ã–µ –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö.

–ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –≤–∞—à —Å–∞–π—Ç —Ç—Ä–µ–±—É–µ—Ç –≤—ã–∑–æ–≤–∞ `useFetch` –¥–ª—è –∫–∞–∂–¥–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –Ω–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –º–µ–Ω—é –∏–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫ —Å–∞–π—Ç–∞ –∏–∑ CMS), —ç—Ç–∏ –¥–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç –ø–æ–ª—É—á–µ–Ω—ã —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑ –ø—Ä–∏ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–º —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–µ –ø–µ—Ä–≤–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã, –∫–æ—Ç–æ—Ä–∞—è –∏—Ö –∏—Å–ø–æ–ª—å–∑—É–µ—Ç, –∞ –∑–∞—Ç–µ–º –∫—ç—à–∏—Ä–æ–≤–∞–Ω—ã –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø—Ä–∏ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–º —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–µ –¥—Ä—É–≥–∏—Ö —Å—Ç—Ä–∞–Ω–∏—Ü.

##### –≠—Ç–∞–ø—ã –º–∏–≥—Ä–∞—Ü–∏–∏

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ª—é–±–æ–π —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∫–ª—é—á –≤–∞—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö –≤—Å–µ–≥–¥–∞ –º–æ–∂–Ω–æ —Ä–∞–∑—Ä–µ—à–∏—Ç—å –≤ —Ç–µ –∂–µ —Å–∞–º—ã–µ –¥–∞–Ω–Ω—ã–µ. –ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ `useAsyncData` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö, –æ—Ç–Ω–æ—Å—è—â–∏—Ö—Å—è –∫ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ, –≤—ã –¥–æ–ª–∂–Ω—ã –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å –∫–ª—é—á, –∫–æ—Ç–æ—Ä—ã–π –æ–¥–Ω–æ–∑–Ω–∞—á–Ω–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —ç—Ç–∏–º –¥–∞–Ω–Ω—ã–º. (–§—É–Ω–∫—Ü–∏—è `useFetch` –¥–æ–ª–∂–Ω–∞ —Å–¥–µ–ª–∞—Ç—å —ç—Ç–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏).

```ts [app/pages/test/[slug\\].vue]
// –≠—Ç–æ –±—ã–ª–æ –±—ã –Ω–µ–±–µ–∑–æ–ø–∞—Å–Ω–æ –Ω–∞ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `[slug].vue`), –ø–æ—Ç–æ–º—É —á—Ç–æ slug –º–∞—Ä—à—Ä—É—Ç–∞ —Ä–∞–∑–Ω—ã–π
// –≤ –ø–æ–ª—É—á–∞–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö, –Ω–æ Nuxt –Ω–µ –º–æ–∂–µ—Ç —ç—Ç–æ–≥–æ –∑–Ω–∞—Ç—å, –ø–æ—Ç–æ–º—É —á—Ç–æ —ç—Ç–æ –Ω–µ –æ—Ç—Ä–∞–∂–µ–Ω–æ –≤ –∫–ª—é—á–µ.
const route = useRoute()
const { data } = await useAsyncData(async () => {
  return await $fetch(`/api/my-page/${route.params.slug}`)
})
// –í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ —Å–ª–µ–¥—É–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–ª—é—á, –∫–æ—Ç–æ—Ä—ã–π –æ–¥–Ω–æ–∑–Ω–∞—á–Ω–æ –∏–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç –ø–æ–ª—É—á–∞–µ–º—ã–µ –¥–∞–Ω–Ω—ã–µ.
const { data } = await useAsyncData(route.params.slug, async () => {
  return await $fetch(`/api/my-page/${route.params.slug}`)
})
```

–ù–æ –≤—ã –≤—Å–µ —Ä–∞–≤–Ω–æ –º–æ–∂–µ—Ç–µ –æ—Ç–∫–ª—é—á–∏—Ç—å —ç—Ç—É —Ñ—É–Ω–∫—Ü–∏—é —Å –ø–æ–º–æ—â—å—é:

```ts twoslash [nuxt.config.ts]
export default defineNuxtConfig({
  experimental: {
    sharedPrerenderData: false
  }
})
```

#### –ó–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `data` –∏ `error` –≤ `useAsyncData` –∏ `useFetch`

üö¶ **–£—Ä–æ–≤–µ–Ω—å –≤–æ–∑–¥–µ–π—Å—Ç–≤–∏—è**: –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π

##### –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

–û–±—ä–µ–∫—Ç—ã `data` –∏ `error`, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–µ –∏–∑ `useAsyncData`, —Ç–µ–ø–µ—Ä—å –±—É–¥—É—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏–º–µ—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ `undefined`.

##### –ü—Ä–∏—á–∏–Ω—ã —Ç–∞–∫–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π

–†–∞–Ω–µ–µ `data` –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–ª–∞—Å—å –≤ `null`, –Ω–æ —Å–±—Ä–∞—Å—ã–≤–∞–ª–∞—Å—å –≤ `clearNuxtData` –≤ `undefined`. `error` –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–ª—Å—è –≤ `null`. –≠—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –ø—Ä–∏–∑–≤–∞–Ω–æ –æ–±–µ—Å–ø–µ—á–∏—Ç—å –±–æ–ª—å—à—É—é —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å.

##### –≠—Ç–∞–ø—ã –º–∏–≥—Ä–∞—Ü–∏–∏

–ï—Å–ª–∏ –≤—ã –ø—Ä–æ–≤–µ—Ä—è–ª–∏, —è–≤–ª—è—é—Ç—Å—è –ª–∏ `data.value` –∏–ª–∏ `error.value` `null`, –≤—ã –º–æ–∂–µ—Ç–µ –æ–±–Ω–æ–≤–∏—Ç—å —ç—Ç–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏, —á—Ç–æ–±—ã –ø—Ä–æ–≤–µ—Ä—è—Ç—å –Ω–∞ `undefined` –≤–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ.

::tip
–í—ã –º–æ–∂–µ—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å —ç—Ç–æ—Ç —à–∞–≥, –∑–∞–ø—É—Å—Ç–∏–≤ `npx codemod@latest nuxt/4/default-data-error-value`
::

–ï—Å–ª–∏ —É –≤–∞—Å –≤–æ–∑–Ω–∏–∫–Ω—É—Ç –∫–∞–∫–∏–µ-–ª–∏–±–æ –ø—Ä–æ–±–ª–µ–º—ã, –≤—ã –º–æ–∂–µ—Ç–µ –≤–µ—Ä–Ω—É—Ç—å—Å—è –∫ –ø—Ä–µ–∂–Ω–µ–º—É –ø–æ–≤–µ–¥–µ–Ω–∏—é —Å –ø–æ–º–æ—â—å—é:

```ts twoslash [nuxt.config.ts]
// @errors: 2353
export default defineNuxtConfig({
  experimental: {
    defaults: {
      useAsyncData: {
        value: 'null',
        errorValue: 'null'
      }
    }
  }
})
```

–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —Å–æ–æ–±—â–∏—Ç–µ –æ –ø—Ä–æ–±–ª–µ–º–µ, –µ—Å–ª–∏ –≤—ã –¥–µ–ª–∞–µ—Ç–µ —ç—Ç–æ, —Ç–∞–∫ –∫–∞–∫ –º—ã –Ω–µ –ø–ª–∞–Ω–∏—Ä—É–µ–º —Å–æ—Ö—Ä–∞–Ω—è—Ç—å —ç—Ç—É –Ω–∞—Å—Ç—Ä–æ–π–∫—É.

#### –£–¥–∞–ª–µ–Ω–∏–µ —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –∑–Ω–∞—á–µ–Ω–∏–π `boolean` –¥–ª—è –æ–ø—Ü–∏–∏ `dedupe` –ø—Ä–∏ –≤—ã–∑–æ–≤–µ `refresh` –≤ `useAsyncData` –∏ `useFetch`

üö¶ **–£—Ä–æ–≤–µ–Ω—å –≤–æ–∑–¥–µ–π—Å—Ç–≤–∏—è**: –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π

##### –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

–†–∞–Ω–µ–µ –≤ `refresh` –º–æ–∂–Ω–æ –±—ã–ª–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å `dedupe: boolean`. –≠—Ç–æ –±—ã–ª–∏ –ø—Å–µ–≤–¥–æ–Ω–∏–º—ã `cancel` (`true`) –∏ `defer` (`false`).

```ts twoslash [app.vue]
// @errors: 2322
const { refresh } = await useAsyncData(async () => ({ message: '–ü—Ä–∏–≤–µ—Ç, Nuxt 3!' }))

async function refreshData () {
  await refresh({ dedupe: true })
}
```

##### –ü—Ä–∏—á–∏–Ω—ã —Ç–∞–∫–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π

–≠—Ç–∏ –ø—Å–µ–≤–¥–æ–Ω–∏–º—ã –±—ã–ª–∏ —É–¥–∞–ª–µ–Ω—ã –¥–ª—è –±–æ–ª—å—à–µ–π —è—Å–Ω–æ—Å—Ç–∏.

–ü—Ä–æ–±–ª–µ–º–∞ –≤–æ–∑–Ω–∏–∫–ª–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ `dedupe` –≤ –∫–∞—á–µ—Å—Ç–≤–µ –æ–ø—Ü–∏–∏ –∫ `useAsyncData`, –∏ –º—ã —É–¥–∞–ª–∏–ª–∏ –±—É–ª–µ–≤—ã –∑–Ω–∞—á–µ–Ω–∏—è, –ø–æ—Å–∫–æ–ª—å–∫—É –æ–Ω–∏ –æ–∫–∞–∑–∞–ª–∏—Å—å _–ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω—ã–º–∏_.

`refresh({ dedupe: false })` –æ–∑–Ω–∞—á–∞–ª–æ "–Ω–µ –æ—Ç–º–µ–Ω—è—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∑–∞–ø—Ä–æ—Å—ã –≤ –ø–æ–ª—å–∑—É –Ω–æ–≤–æ–≥–æ". –ù–æ –ø–µ—Ä–µ–¥–∞—á–∞ `dedupe: true` –≤ –æ–ø—Ü–∏—è—Ö `useAsyncData` –æ–∑–Ω–∞—á–∞–µ—Ç "–Ω–µ –¥–µ–ª–∞—Ç—å –Ω–∏–∫–∞–∫–∏—Ö –Ω–æ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤, –µ—Å–ª–∏ –µ—Å—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –æ—Ç–ª–æ–∂–µ–Ω–Ω—ã–π –∑–∞–ø—Ä–æ—Å". (–°–º. [PR](https://github.com/nuxt/nuxt/pull/24564#pullrequestreview-1764584361).)

##### –≠—Ç–∞–ø—ã –º–∏–≥—Ä–∞—Ü–∏–∏

–ú–∏–≥—Ä–∞—Ü–∏—è –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ø—Ä–æ—Å—Ç–æ–π:

```diff
  const { refresh } = await useAsyncData(async () => ({ message: '–ü—Ä–∏–≤–µ—Ç, Nuxt 3!' }))
  
  async function refreshData () {
-   await refresh({ dedupe: true })
+   await refresh({ dedupe: 'cancel' })

-   await refresh({ dedupe: false })
+   await refresh({ dedupe: 'defer' })
  }
```

::tip
–í—ã –º–æ–∂–µ—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å —ç—Ç–æ—Ç —à–∞–≥, –∑–∞–ø—É—Å—Ç–∏–≤ `npx codemod@latest nuxt/4/deprecated-dedupe-value`
::

#### –°–æ–±–ª—é–¥–∞–π—Ç–µ –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø—Ä–∏ –æ—á–∏—Å—Ç–∫–µ `data` –≤ `useAsyncData` –∏ `useFetch`

üö¶ **–£—Ä–æ–≤–µ–Ω—å –≤–æ–∑–¥–µ–π—Å—Ç–≤–∏—è**: –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π

##### –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

–ï—Å–ª–∏ –≤—ã —É–∫–∞–∑–∞–ª–∏ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ `default` –¥–ª—è `useAsyncData`, —Ç–æ —Ç–µ–ø–µ—Ä—å –æ–Ω–æ –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –ø—Ä–∏ –≤—ã–∑–æ–≤–µ `clear` –∏–ª–∏ `clearNuxtData` –∏ –±—É–¥–µ—Ç —Å–±—Ä–∞—Å—ã–≤–∞—Ç—å—Å—è –¥–æ –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, –∞ –Ω–µ –ø—Ä–æ—Å—Ç–æ —Å–Ω–∏–º–∞—Ç—å—Å—è.

##### –ü—Ä–∏—á–∏–Ω—ã —Ç–∞–∫–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π

–ß–∞—Å—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∑–∞–¥–∞—é—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–µ –ø—É—Å—Ç–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ, –Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ `null`/`undefined` –ø—Ä–∏ –∏—Ç–µ—Ä–∞—Ü–∏–∏ –ø–æ –Ω–µ–º—É. –≠—Ç–æ –¥–æ–ª–∂–Ω–æ —Å–æ–±–ª—é–¥–∞—Ç—å—Å—è –ø—Ä–∏ —Å–±—Ä–æ—Å–µ/–æ—á–∏—Å—Ç–∫–µ –¥–∞–Ω–Ω—ã—Ö.

##### –≠—Ç–∞–ø—ã –º–∏–≥—Ä–∞—Ü–∏–∏

–ï—Å–ª–∏ —É –≤–∞—Å –≤–æ–∑–Ω–∏–∫–Ω—É—Ç –∫–∞–∫–∏–µ-–ª–∏–±–æ –ø—Ä–æ–±–ª–µ–º—ã, –≤—ã –º–æ–∂–µ—Ç–µ –ø–æ–∫–∞ —á—Ç–æ –≤–µ—Ä–Ω—É—Ç—å—Å—è –∫ –ø—Ä–µ–∂–Ω–µ–º—É –ø–æ–≤–µ–¥–µ–Ω–∏—é, –∏—Å–ø–æ–ª—å–∑—É—è:

```ts twoslash [nuxt.config.ts]
// @errors: 2353
export default defineNuxtConfig({
  experimental: {
    resetAsyncDataToUndefined: true,
  }
})
```

–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —Å–æ–æ–±—â–∏—Ç–µ –æ –ø—Ä–æ–±–ª–µ–º–µ, –µ—Å–ª–∏ –≤—ã –¥–µ–ª–∞–µ—Ç–µ —ç—Ç–æ, —Ç–∞–∫ –∫–∞–∫ –º—ã –Ω–µ –ø–ª–∞–Ω–∏—Ä—É–µ–º —Å–æ—Ö—Ä–∞–Ω—è—Ç—å —ç—Ç—É –Ω–∞—Å—Ç—Ä–æ–π–∫—É.

#### –ü–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–Ω–∞—è —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö –≤ `useAsyncData` –∏ `useFetch`

üö¶ **–£—Ä–æ–≤–µ–Ω—å –≤–æ–∑–¥–µ–π—Å—Ç–≤–∏—è**: –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π

–û–±—ä–µ–∫—Ç `data`, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–π –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ `useAsyncData`, `useFetch`, `useLazyAsyncData` –∏ `useLazyFetch`, —Ç–µ–ø–µ—Ä—å –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π `shallowRef`, –∞ –Ω–µ `ref`.

##### –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

–ü—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤—Å–µ, —á—Ç–æ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç `data`, –≤—Å–µ —Ä–∞–≤–Ω–æ –±—É–¥–µ—Ç —Ä–µ–∞–∫—Ç–∏–≤–Ω—ã–º, –ø–æ—Ç–æ–º—É —á—Ç–æ –≤–µ—Å—å –æ–±—ä–µ–∫—Ç –±—É–¥–µ—Ç –∑–∞–º–µ–Ω–µ–Ω. –ù–æ –µ—Å–ª–∏ –≤–∞—à –∫–æ–¥ –∏–∑–º–µ–Ω–∏—Ç —Å–≤–æ–π—Å—Ç–≤–æ _–≤–Ω—É—Ç—Ä–∏_ —ç—Ç–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö, —ç—Ç–æ –Ω–µ –≤—ã–∑–æ–≤–µ—Ç –Ω–∏–∫–∞–∫–æ–π —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –≤ –≤–∞—à–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏.

##### –ü—Ä–∏—á–∏–Ω—ã —Ç–∞–∫–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π

–≠—Ç–æ –¥–∞–µ—Ç **–∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–µ** –ø–æ–≤—ã—à–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –¥–ª—è –≥–ª—É–±–æ–∫–æ –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ –∏ –º–∞—Å—Å–∏–≤–æ–≤, –ø–æ—Å–∫–æ–ª—å–∫—É Vue –Ω–µ –Ω—É–∂–Ω–æ —Å–ª–µ–¥–∏—Ç—å –∑–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º –∫–∞–∂–¥–æ–≥–æ –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ —Å–≤–æ–π—Å—Ç–≤–∞/–º–∞—Å—Å–∏–≤–∞. –í –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ —Å–ª—É—á–∞–µ–≤ `data` —Ç–∞–∫–∂–µ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –Ω–µ–∏–∑–º–µ–Ω—è–µ–º–æ–π.

##### –≠—Ç–∞–ø—ã –º–∏–≥—Ä–∞—Ü–∏–∏

–í –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ —Å–ª—É—á–∞–µ–≤ –º–∏–≥—Ä–∞—Ü–∏—è –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è, –Ω–æ –µ—Å–ª–∏ –≤—ã –ø–æ–ª–∞–≥–∞–µ—Ç–µ—Å—å –Ω–∞ —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –æ–±—ä–µ–∫—Ç–∞ –¥–∞–Ω–Ω—ã—Ö, —Ç–æ —É –≤–∞—Å –µ—Å—Ç—å –¥–≤–∞ –≤–∞—Ä–∏–∞–Ω—Ç–∞:

1. –í—ã –º–æ–∂–µ—Ç–µ —Ç–æ—á–µ—á–Ω–æ –≤—ã–±—Ä–∞—Ç—å –≥–ª—É–±–æ–∫—É—é —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–∞–∂–¥–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞:
   ```diff
   - const { data } = useFetch('/api/test')
   + const { data } = useFetch('/api/test', { deep: true })
   ```
2. –í—ã –º–æ–∂–µ—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –ø–æ–≤–µ–¥–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤ –º–∞—Å—à—Ç–∞–±–∞—Ö –≤—Å–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ (–Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):
   ```ts twoslash [nuxt.config.ts]
   export default defineNuxtConfig({
     experimental: {
       defaults: {
         useAsyncData: {
           deep: true
         }
       }
     }
   })
   ```

::tip
–ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –≤—ã –º–æ–∂–µ—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å —ç—Ç–æ—Ç —à–∞–≥, –∑–∞–ø—É—Å—Ç–∏–≤ `npx codemod@latest nuxt/4/shallow-function-reactivity`
::

#### –ê–±—Å–æ–ª—é—Ç–Ω—ã–µ –ø—É—Ç–∏ –Ω–∞–±–ª—é–¥–µ–Ω–∏—è –≤ `builder:watch`

üö¶ **–£—Ä–æ–≤–µ–Ω—å –≤–æ–∑–¥–µ–π—Å—Ç–≤–∏—è**: –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π

##### –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

Nuxt-—Ö—É–∫ `builder:watch` —Ç–µ–ø–µ—Ä—å –≤—ã–¥–∞–µ—Ç –ø—É—Ç—å, –∫–æ—Ç–æ—Ä—ã–π —è–≤–ª—è–µ—Ç—Å—è –∞–±—Å–æ–ª—é—Ç–Ω—ã–º, –∞ –Ω–µ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–º –∫ `srcDir` –≤–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞.

##### –ü—Ä–∏—á–∏–Ω—ã —Ç–∞–∫–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π

–≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –Ω–∞–º –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –ø—Ä–æ—Å–º–æ—Ç—Ä –ø—É—Ç–µ–π, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –∑–∞ –ø—Ä–µ–¥–µ–ª–∞–º–∏ –≤–∞—à–µ–≥–æ `srcDir`, –∞ —Ç–∞–∫–∂–µ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –ª—É—á—à—É—é –ø–æ–¥–¥–µ—Ä–∂–∫—É —Å–ª–æ–µ–≤ –∏ –¥—Ä—É–≥–∏—Ö –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤.

##### –≠—Ç–∞–ø—ã –º–∏–≥—Ä–∞—Ü–∏–∏

–ú—ã —É–∂–µ –ø—Ä–æ–∞–∫—Ç–∏–≤–Ω–æ –º–∏–≥—Ä–∏—Ä–æ–≤–∞–ª–∏ –ø—É–±–ª–∏—á–Ω—ã–µ –º–æ–¥—É–ª–∏ Nuxt, –∫–æ—Ç–æ—Ä—ã–µ, –∫–∞–∫ –Ω–∞–º –∏–∑–≤–µ—Å—Ç–Ω–æ, –∏—Å–ø–æ–ª—å–∑—É—é—Ç —ç—Ç–æ—Ç —Ö—É–∫. –°–º–æ—Ç—Ä–∏—Ç–µ [issue #25339](https://github.com/nuxt/nuxt/issues/25339).

–û–¥–Ω–∞–∫–æ, –µ—Å–ª–∏ –≤—ã —è–≤–ª—è–µ—Ç–µ—Å—å –∞–≤—Ç–æ—Ä–æ–º –º–æ–¥—É–ª—è, –∏—Å–ø–æ–ª—å–∑—É—é—â–µ–≥–æ —Ö—É–∫ `builder:watch`, –∏ —Ö–æ—Ç–∏—Ç–µ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –æ–±—Ä–∞—Ç–Ω—É—é/–±—É–¥—É—â—É—é —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å, –≤—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–π –∫–æ–¥, —á—Ç–æ–±—ã —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤–∞—à –∫–æ–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç –æ–¥–∏–Ω–∞–∫–æ–≤–æ –∫–∞–∫ –≤ Nuxt v3, —Ç–∞–∫ –∏ –≤ Nuxt v4:

```diff
+ import { relative, resolve } from 'node:fs'
  // ...
  nuxt.hook('builder:watch', async (event, path) => {
+   path = relative(nuxt.options.srcDir, resolve(nuxt.options.srcDir, path))
    // ...
  })
```

::tip
–í—ã –º–æ–∂–µ—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å —ç—Ç–æ—Ç —à–∞–≥, –∑–∞–ø—É—Å—Ç–∏–≤ `npx codemod@latest nuxt/4/absolute-watch-path`
::

#### –£–¥–∞–ª–µ–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞ `window.__NUXT__`

##### –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

–ú—ã —É–¥–∞–ª—è–µ–º –≥–ª–æ–±–∞–ª—å–Ω—ã–π –æ–±—ä–µ–∫—Ç `window.__NUXT__` –ø–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–∞–µ—Ç –≥–∏–¥—Ä–∞—Ç–∞—Ü–∏—é.

##### –ü—Ä–∏—á–∏–Ω—ã —Ç–∞–∫–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π

–≠—Ç–æ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –ø—É—Ç—å –∫ —à–∞–±–ª–æ–Ω–∞–º –º—É–ª—å—Ç–∏-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π ([#21635](https://github.com/nuxt/nuxt/issues/21635)) –∏ –ø–æ–∑–≤–æ–ª—è–µ—Ç –Ω–∞–º —Å–æ—Å—Ä–µ–¥–æ—Ç–æ—á–∏—Ç—å—Å—è –Ω–∞ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–º —Å–ø–æ—Å–æ–±–µ –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∞–Ω–Ω—ã–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è Nuxt - `useNuxtApp()`.

##### –≠—Ç–∞–ø—ã –º–∏–≥—Ä–∞—Ü–∏–∏

–î–∞–Ω–Ω—ã–µ –ø–æ-–ø—Ä–µ–∂–Ω–µ–º—É –¥–æ—Å—Ç—É–ø–Ω—ã, –Ω–æ –¥–æ—Å—Ç—É–ø –∫ –Ω–∏–º –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å —Å –ø–æ–º–æ—â—å—é `useNuxtApp().payload`:

```diff
- console.log(window.__NUXT__)
+ console.log(useNuxtApp().payload)
```

#### –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏

üö¶ **–£—Ä–æ–≤–µ–Ω—å –≤–æ–∑–¥–µ–π—Å—Ç–≤–∏—è**: –°—Ä–µ–¥–Ω–∏–π

##### –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

–î–æ—á–µ—Ä–Ω–∏–µ –ø–∞–ø–∫–∏ –≤ –ø–∞–ø–∫–µ `middleware/` —Ç–∞–∫–∂–µ –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –Ω–∞ –Ω–∞–ª–∏—á–∏–µ —Ñ–∞–π–ª–æ–≤ `index`, –∏ —Ç–µ–ø–µ—Ä—å –æ–Ω–∏ —Ç–∞–∫–∂–µ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É—é—Ç—Å—è –∫–∞–∫ middleware –≤ –≤–∞—à–µ–º –ø—Ä–æ–µ–∫—Ç–µ.

##### –ü—Ä–∏—á–∏–Ω—ã —Ç–∞–∫–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π

Nuxt –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫–∞–Ω–∏—Ä—É–µ—Ç —Ä—è–¥ –ø–∞–ø–æ–∫, –≤–∫–ª—é—á–∞—è `middleware/` –∏ `plugins/`.

–î–æ—á–µ—Ä–Ω–∏–µ –ø–∞–ø–∫–∏ –≤ –≤–∞—à–µ–π –ø–∞–ø–∫–µ `plugins/` —Å–∫–∞–Ω–∏—Ä—É—é—Ç—Å—è –Ω–∞ –Ω–∞–ª–∏—á–∏–µ —Ñ–∞–π–ª–æ–≤ `index`, –∏ –º—ã —Ö–æ—Ç–µ–ª–∏ —Å–¥–µ–ª–∞—Ç—å —ç—Ç–æ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–º –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å–∫–∞–Ω–∏—Ä—É–µ–º—ã—Ö –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π.

##### –≠—Ç–∞–ø—ã –º–∏–≥—Ä–∞—Ü–∏–∏

–°–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ, –º–∏–≥—Ä–∞—Ü–∏—è –Ω–µ –Ω—É–∂–Ω–∞, –Ω–æ –µ—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –≤–µ—Ä–Ω—É—Ç—å—Å—è –∫ –ø—Ä–µ–¥—ã–¥—É—â–µ–º—É –ø–æ–≤–µ–¥–µ–Ω–∏—é, –≤—ã –º–æ–∂–µ—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å —Ö—É–∫ –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ —ç—Ç–∏—Ö middleware:

```ts
export default defineNuxtConfig({
  hooks: {
    'app:resolve'(app) {
      app.middleware = app.middleware.filter(mw => !/\/index\.[^/]+$/.test(mw.path))
    }
  }
})
```

#### –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ —à–∞–±–ª–æ–Ω–æ–≤

üö¶ **–£—Ä–æ–≤–µ–Ω—å –≤–æ–∑–¥–µ–π—Å—Ç–≤–∏—è**: –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π

##### –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

–†–∞–Ω–µ–µ Nuxt –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª `lodash/template` –¥–ª—è –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ —à–∞–±–ª–æ–Ω–æ–≤, —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–Ω—ã—Ö –≤ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ, –∏—Å–ø–æ–ª—å–∑—É—è —Ñ–æ—Ä–º–∞—Ç/—Å–∏–Ω—Ç–∞–∫—Å–∏—Å —Ñ–∞–π–ª–∞ `.ejs`.

–ö—Ä–æ–º–µ —Ç–æ–≥–æ, –º—ã –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ —É—Ç–∏–ª–∏—Ç –¥–ª—è —à–∞–±–ª–æ–Ω–æ–≤ (`serialize`, `importName`, `importSources`), –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ –±—ã–ª–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–æ–¥–∞ –≤–Ω—É—Ç—Ä–∏ —ç—Ç–∏—Ö —à–∞–±–ª–æ–Ω–æ–≤, –∞ —Ç–µ–ø–µ—Ä—å –æ–Ω–∏ —É–¥–∞–ª–µ–Ω—ã.

##### –ü—Ä–∏—á–∏–Ω—ã —Ç–∞–∫–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π

–í Nuxt v3 –º—ã –ø–µ—Ä–µ—à–ª–∏ –Ω–∞ '–≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π' —Å–∏–Ω—Ç–∞–∫—Å–∏—Å —Å —Ñ—É–Ω–∫—Ü–∏–µ–π `getContents()`, –∫–æ—Ç–æ—Ä–∞—è —è–≤–ª—è–µ—Ç—Å—è –≥–æ—Ä–∞–∑–¥–æ –±–æ–ª–µ–µ –≥–∏–±–∫–æ–π –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ–π.

–ö—Ä–æ–º–µ —Ç–æ–≥–æ, —É `lodash/template` –±—ã–ª–∞ —Ü–µ–ª–∞—è —á–µ—Ä–µ–¥–∞ –ø—Ä–æ–±–ª–µ–º —Å –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å—é. –û–Ω–∏ –Ω–µ —Å–æ–≤—Å–µ–º –æ—Ç–Ω–æ—Å—è—Ç—Å—è –∫ –ø—Ä–æ–µ–∫—Ç–∞–º Nuxt, –ø–æ—Å–∫–æ–ª—å–∫—É –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤–æ –≤—Ä–µ–º—è —Å–±–æ—Ä–∫–∏, –∞ –Ω–µ –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è, –∏ –≤ –¥–æ–≤–µ—Ä–µ–Ω–Ω–æ–º –∫–æ–¥–µ. –¢–µ–º –Ω–µ –º–µ–Ω–µ–µ –æ–Ω–∏ –≤—Å–µ –µ—â–µ –ø–æ—è–≤–ª—è—é—Ç—Å—è –≤ –∞—É–¥–∏—Ç–∞—Ö –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏. –ë–æ–ª–µ–µ —Ç–æ–≥–æ, `lodash` - —ç—Ç–æ –±–æ–ª—å—à–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å, –∏ –æ–Ω–∞ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ –ø—Ä–æ–µ–∫—Ç–æ–≤.

–ù–∞–∫–æ–Ω–µ—Ü, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∫–æ–¥–∞ –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ –≤ Nuxt –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –∏–¥–µ–∞–ª—å–Ω—ã–º —Ä–µ—à–µ–Ω–∏–µ–º. –í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –º—ã –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º —Ç–∞–∫–∏–µ –ø—Ä–æ–µ–∫—Ç—ã, –∫–∞–∫ [unjs/knitwork](http://github.com/unjs/knitwork), –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –±—ã—Ç—å –∑–∞–≤–∏—Å–∏–º—ã –æ—Ç –≤–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞, –∏ –≥–¥–µ –æ –ø—Ä–æ–±–ª–µ–º–∞—Ö –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –º–æ–∂–Ω–æ —Å–æ–æ–±—â–∞—Ç—å/—Ä–µ—à–∞—Ç—å –Ω–∞–ø—Ä—è–º—É—é, –Ω–µ —Ç—Ä–µ–±—É—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–∞–º–æ–≥–æ Nuxt.

##### –≠—Ç–∞–ø—ã –º–∏–≥—Ä–∞—Ü–∏–∏

–ú—ã –ø–æ–¥–Ω—è–ª–∏ PR –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –º–æ–¥—É–ª–µ–π —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ EJS, –Ω–æ –µ—Å–ª–∏ –≤–∞–º –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å —ç—Ç–æ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ, —É –≤–∞—Å –µ—Å—Ç—å —Ç—Ä–∏ –æ–±—Ä–∞—Ç–Ω–æ/–±—É–¥—É—â–µ —Å–æ–≤–º–µ—Å—Ç–∏–º—ã–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã:

* –ü–µ—Ä–µ–Ω–æ—Å –ª–æ–≥–∏–∫–∏ –∏–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏–∏ —Å—Ç—Ä–æ–∫ –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ –≤ `getContents()`.
* –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–º–µ–Ω—ã, –∫–∞–∫, –Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ https://github.com/nuxt-modules/color-mode/pull/240.
* –ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `lodash`, –∫–∞–∫ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç _–≤–∞—à–µ–≥–æ_ –ø—Ä–æ–µ–∫—Ç–∞, –∞ –Ω–µ Nuxt:

```diff
+ import { readFileSync } from 'node:fs'
+ import { template } from 'lodash-es'
  // ...
  addTemplate({
    fileName: 'appinsights-vue.js'
    options: { /* some options */ },
-   src: resolver.resolve('./runtime/plugin.ejs'),
+   getContents({ options }) {
+     const contents = readFileSync(resolver.resolve('./runtime/plugin.ejs'), 'utf-8')
+     return template(contents)({ options })
+   },
  })
```

–ù–∞–∫–æ–Ω–µ—Ü, –µ—Å–ª–∏ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ —à–∞–±–ª–æ–Ω–Ω—ã–µ —É—Ç–∏–ª–∏—Ç—ã (`serialize`, `importName`, `importSources`), –≤—ã –º–æ–∂–µ—Ç–µ –∑–∞–º–µ–Ω–∏—Ç—å –∏—Ö –Ω–∞ —É—Ç–∏–ª–∏—Ç—ã –∏–∑ `knitwork` —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:

```ts
import { genDynamicImport, genImport, genSafeVariableName } from 'knitwork'

const serialize = (data: any) => JSON.stringify(data, null, 2).replace(/"{(.+)}"(?=,?$)/gm, r => JSON.parse(r).replace(/^{(.*)}$/, '$1'))

const importSources = (sources: string | string[], { lazy = false } = {}) => {
  return toArray(sources).map((src) => {
    if (lazy) {
      return `const ${genSafeVariableName(src)} = ${genDynamicImport(src, { comment: `webpackChunkName: ${JSON.stringify(src)}` })}`
    }
    return genImport(src, genSafeVariableName(src))
  }).join('\n')
}

const importName = genSafeVariableName
```

::tip
–í—ã –º–æ–∂–µ—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å —ç—Ç–æ—Ç —à–∞–≥, –∑–∞–ø—É—Å—Ç–∏–≤ `npx codemod@latest nuxt/4/template-compilation-changes`
::

#### –£–¥–∞–ª–µ–Ω–∏–µ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π

üö¶ **–£—Ä–æ–≤–µ–Ω—å –≤–æ–∑–¥–µ–π—Å—Ç–≤–∏—è**: –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π

##### –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

–ß–µ—Ç—ã—Ä–µ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –±–æ–ª—å—à–µ –Ω–µ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è –≤ Nuxt 4:

* `experimental.treeshakeClientOnly` –±—É–¥–µ—Ç `true` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Å v3.0)
* `experimental.configSchema` –±—É–¥–µ—Ç `true` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Å v3.3)
* `experimental.polyfillVueUseHead` –±—É–¥–µ—Ç `false` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Å v3.4)
* `experimental.respectNoSSRHeader` –±—É–¥–µ—Ç `false` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Å v3.4)
* `vite.devBundler` –±–æ–ª—å—à–µ –Ω–µ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è - –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è `vite-node`.

##### –ü—Ä–∏—á–∏–Ω—ã —Ç–∞–∫–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π

–≠—Ç–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —É–∂–µ –¥–∞–≤–Ω–æ –∏–º–µ—é—Ç —Ç–µ–∫—É—â–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è, –∏ —É –Ω–∞—Å –Ω–µ—Ç –ø—Ä–∏—á–∏–Ω –ø–æ–ª–∞–≥–∞—Ç—å, —á—Ç–æ –æ–Ω–∏ –¥–æ–ª–∂–Ω—ã –æ—Å—Ç–∞–≤–∞—Ç—å—Å—è –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–º–∏.

##### –≠—Ç–∞–ø—ã –º–∏–≥—Ä–∞—Ü–∏–∏

* `polyfillVueUseHead` —Ä–µ–∞–ª–∏–∑—É–µ—Ç—Å—è –Ω–∞ —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –ø–æ–º–æ—â—å—é [—ç—Ç–æ–≥–æ –ø–ª–∞–≥–∏–Ω–∞](https://github.com/nuxt/nuxt/blob/f209158352b09d1986aa320e29ff36353b91c358/packages/nuxt/src/head/runtime/plugins/vueuse-head-polyfill.ts#L10-L11)

* `respectNoSSRHeader` —Ä–µ–∞–ª–∏–∑—É–µ—Ç—Å—è –Ω–∞ —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –ø–æ–º–æ—â—å—é [—Å–µ—Ä–≤–µ—Ä–Ω–æ–π middleware](https://github.com/nuxt/nuxt/blob/c660b39447f0d5b8790c0826092638d321cd6821/packages/nuxt/src/core/runtime/nitro/no-ssr.ts#L8-L9)

## Nuxt 2 –ø—Ä–æ—Ç–∏–≤ Nuxt 3+

–í —Ç–∞–±–ª–∏—Ü–µ –Ω–∏–∂–µ –ø—Ä–∏–≤–µ–¥–µ–Ω–æ –∫—Ä–∞—Ç–∫–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –º–µ–∂–¥—É 3 –≤–µ—Ä—Å–∏—è–º–∏ Nuxt:

| Feature / Version           | Nuxt 2        | Nuxt Bridge   | Nuxt 3+       |
| --------------------------- | ------------- | ------------- |---------------|
| Vue                         | 2             | 2             | 3             |
| –°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å                | üòä –°—Ç–∞–±–∏–ª—å–Ω—ã–π | üòä –°—Ç–∞–±–∏–ª—å–Ω—ã–π | üòä –°—Ç–∞–±–∏–ª—å–Ω—ã–π |
| –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏          | üèé –ë—ã—Å—Ç—Ä—ã–π    | ‚úàÔ∏è –ë—ã—Å—Ç—Ä–µ–µ     | üöÄ –ë—ã—Å—Ç—Ä–µ–π—à–∏–π |
| –î–≤–∏–∂–æ–∫ Nitro                | ‚ùå            | ‚úÖ            | ‚úÖ             |
| –ü–æ–¥–¥–µ—Ä–∂–∫–∞ ESM               | üåô –ß–∞—Å—Ç–∏—á–Ω–æ   | üëç –õ—É—á—à–µ      | ‚úÖ             |
| TypeScript                  | ‚òëÔ∏è Opt-in      | üöß –ß–∞—Å—Ç–∏—á–Ω–æ   | ‚úÖ             |
| Composition API             | ‚ùå            | üöß –ß–∞—Å—Ç–∏—á–Ω–æ   | ‚úÖ             |
| Options API                 | ‚úÖ            | ‚úÖ            | ‚úÖ             |
| –ê–≤—Ç–æ–∏–º–ø–æ—Ä—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç        | ‚úÖ            | ‚úÖ            | ‚úÖ             |
| `<script setup>` —Å–∏–Ω–∫—Ç–∞–∫—Å–∏—Å | ‚ùå            | üöß –ß–∞—Å—Ç–∏—á–Ω–æ   | ‚úÖ             |
| –ê–≤—Ç–æ–∏–º–ø–æ—Ä—Ç—ã                 | ‚ùå            | ‚úÖ            | ‚úÖ             |
| webpack                     | 4             | 4             | 5             |
| Vite                        | ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–æ    | üöß –ß–∞—Å—Ç–∏—á–Ω–æ   | ‚úÖ             |
| Nuxi CLI                    | ‚ùå –£—Å—Ç–∞—Ä–µ–ª    | ‚úÖ nuxi       | ‚úÖ nuxi        |
| –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Å–∞–π—Ç—ã           | ‚úÖ            | ‚úÖ            | ‚úÖ             |

## –° Nuxt 2 –Ω–∞ Nuxt 3+

–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –º–∏–≥—Ä–∞—Ü–∏–∏ —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ—à–∞–≥–æ–≤–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π Nuxt 2 —Å —Ñ—É–Ω–∫—Ü–∏—è–º–∏ Nuxt 3+ –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∞–¥–∞–ø—Ç–∞—Ü–∏–∏ –≤–∞—à–µ–≥–æ —Ç–µ–∫—É—â–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

::read-more{to="/docs/migration/overview"}
–û–∑–Ω–∞–∫–æ–º—å—Ç–µ—Å—å —Å **—Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ–º –ø–æ –ø–µ—Ä–µ—Ö–æ–¥—É —Å Nuxt 2 –Ω–∞ Nuxt 3**.
::

## –° Nuxt 2 –Ω–∞ Nuxt Bridge

–ï—Å–ª–∏ –≤—ã –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞–µ—Ç–µ –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ –ø–µ—Ä–µ–≤–æ–¥–∏—Ç—å —Å–≤–æ–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è Nuxt 2 –Ω–∞ Nuxt 3, –≤—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Nuxt Bridge. Nuxt Bridge - —ç—Ç–æ —É—Ä–æ–≤–µ–Ω—å —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤–∞–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏ Nuxt 3+ –≤ Nuxt 2 —Å –ø–æ–º–æ—â—å—é –º–µ—Ö–∞–Ω–∏–∑–º–∞ opt-in.

::read-more{to="/docs/bridge/overview"}
**–ü–µ—Ä–µ—Ö–æ–¥ —Å Nuxt 2 –Ω–∞ Nuxt Bridge**.
::
