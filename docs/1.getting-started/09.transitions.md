---
title: 'Переходы'
description: Применение переходов между страницами и макетами с помощью Vue или нативного View Transitions API браузера.
navigation.icon: i-lucide-toggle-right
---

::note
Nuxt использует компонент Vue [`<Transition>`](https://vuejs.org/guide/built-ins/transition#the-transition-component) для переходов между страницами и макетами.
::

## Переходы между страницами

Переходы страниц включаются для всех [страниц](/docs/4.x/directory-structure/app/pages):

```ts twoslash [nuxt.config.ts]
export default defineNuxtConfig({
  app: {
    pageTransition: { name: 'page', mode: 'out-in' },
  },
})
```

::note
Если меняется и макет, и страница, заданный здесь переход страницы не сработает. В этом случае настройте [переход макета](/docs/4.x/getting-started/transitions#layout-transitions).
::

Добавьте следующий CSS в [`app.vue`](/docs/4.x/directory-structure/app/app):

::code-group

```vue [app/app.vue]
<template>
  <NuxtPage />
</template>

<style>
.page-enter-active,
.page-leave-active {
  transition: all 0.4s;
}
.page-enter-from,
.page-leave-to {
  opacity: 0;
  filter: blur(1rem);
}
</style>
```

```vue [app/pages/index.vue]
<template>
  <div>
    <h1>Главная</h1>
    <NuxtLink to="/about">О нас</NuxtLink>
  </div>
</template>
```

```vue [app/pages/about.vue]
<template>
  <div>
    <h1>О нас</h1>
    <NuxtLink to="/">Главная</NuxtLink>
  </div>
</template>
```

::

При навигации между страницами получится такой результат:

<video controls class="rounded" poster="https://res.cloudinary.com/nuxt/video/upload/v1665061349/nuxt3/nuxt3-page-transitions_umwvmh.jpg">
  <source src="https://res.cloudinary.com/nuxt/video/upload/v1665061349/nuxt3/nuxt3-page-transitions_umwvmh.mp4" type="video/mp4">
</video>

Для отдельной страницы другой переход задаётся ключом `pageTransition` в [`definePageMeta`](/docs/4.x/api/utils/define-page-meta):

::code-group

```vue twoslash [pages/about.vue]
<script setup lang="ts">
definePageMeta({
  pageTransition: {
    name: 'rotate',
  },
})
</script>
```

```vue [app/app.vue]
<template>
  <NuxtPage />
</template>

<style>
/* ... */
.rotate-enter-active,
.rotate-leave-active {
  transition: all 0.4s;
}
.rotate-enter-from,
.rotate-leave-to {
  opacity: 0;
  transform: rotate3d(1, 1, 1, 15deg);
}
</style>
```

::

На странице About будет эффект 3D-поворота:

<video controls class="rounded" poster="https://res.cloudinary.com/nuxt/video/upload/v1665063233/nuxt3/nuxt3-page-transitions-cutom.jpg">
  <source src="https://res.cloudinary.com/nuxt/video/upload/v1665063233/nuxt3/nuxt3-page-transitions-cutom.mp4" type="video/mp4">
</video>

## Переходы макетов

Переходы макетов включаются для всех [макетов](/docs/4.x/directory-structure/app/layouts):

```ts twoslash [nuxt.config.ts]
export default defineNuxtConfig({
  app: {
    layoutTransition: { name: 'layout', mode: 'out-in' },
  },
})
```

Добавьте следующий CSS в [`app.vue`](/docs/4.x/directory-structure/app/app):

::code-group

```vue [app/app.vue]
<template>
  <NuxtLayout>
    <NuxtPage />
  </NuxtLayout>
</template>

<style>
.layout-enter-active,
.layout-leave-active {
  transition: all 0.4s;
}
.layout-enter-from,
.layout-leave-to {
  filter: grayscale(1);
}
</style>
```

```vue [app/layouts/default.vue]
<template>
  <div>
    <pre>default layout</pre>
    <slot />
  </div>
</template>

<style scoped>
div {
  background-color: lightgreen;
}
</style>
```

```vue [app/layouts/orange.vue]
<template>
  <div>
    <pre>orange layout</pre>
    <slot />
  </div>
</template>

<style scoped>
div {
  background-color: #eebb90;
  padding: 20px;
  height: 100vh;
}
</style>
```

```vue [app/pages/index.vue]
<template>
  <div>
    <h1>Главная</h1>
    <NuxtLink to="/about">О нас</NuxtLink>
  </div>
</template>
```

```vue [app/pages/about.vue]
<script setup lang="ts">
definePageMeta({
  layout: 'orange',
})
</script>

<template>
  <div>
    <h1>О нас</h1>
    <NuxtLink to="/">Главная</NuxtLink>
  </div>
</template>
```

::

Результат при навигации:

<video controls class="rounded" poster="https://res.cloudinary.com/nuxt/video/upload/v1665065289/nuxt3/nuxt3-layouts-transitions_c9hwlx.jpg">
  <source src="https://res.cloudinary.com/nuxt/video/upload/v1665065289/nuxt3/nuxt3-layouts-transitions_c9hwlx.mp4" type="video/mp4">
</video>

Как и для `pageTransition`, свой переход макета задаётся в `definePageMeta` через `layoutTransition`:

```vue twoslash [pages/about.vue]
<script setup lang="ts">
definePageMeta({
  layout: 'orange',
  layoutTransition: {
    name: 'slide-in',
  },
})
</script>
```

## Глобальные настройки

Имена переходов по умолчанию настраиваются в `nuxt.config`.

Ключи `pageTransition` и `layoutTransition` принимают значения в формате [`TransitionProps`](https://vuejs.org/api/built-in-components#transition) (JSON-serializable): `name`, `mode` и другие опции перехода.

```ts twoslash [nuxt.config.ts]
export default defineNuxtConfig({
  app: {
    pageTransition: {
      name: 'fade',
      mode: 'out-in', // по умолчанию
    },
    layoutTransition: {
      name: 'slide',
      mode: 'out-in', // по умолчанию
    },
  },
})
```

::warning
При смене свойства `name` переименуйте соответствующие CSS-классы.
::

Чтобы переопределить глобальный переход для одной страницы, используйте `definePageMeta` — это перезапишет настройки из `nuxt.config`.

```vue twoslash [pages/some-page.vue]
<script setup lang="ts">
definePageMeta({
  pageTransition: {
    name: 'bounce',
    mode: 'out-in', // по умолчанию
  },
})
</script>
```

## Отключение переходов

Для конкретного маршрута можно отключить `pageTransition` и `layoutTransition`:

```vue twoslash [pages/some-page.vue]
<script setup lang="ts">
definePageMeta({
  pageTransition: false,
  layoutTransition: false,
})
</script>
```

Или глобально в `nuxt.config`:

```ts twoslash [nuxt.config.ts]
export default defineNuxtConfig({
  app: {
    pageTransition: false,
    layoutTransition: false,
  },
})
```

## JavaScript-хуки

Для сложных сценариев можно использовать JavaScript-хуки и библиотеки анимации, например [GSAP](https://gsap.com).

```vue twoslash [pages/some-page.vue]
<script setup lang="ts">
definePageMeta({
  pageTransition: {
    name: 'custom-flip',
    mode: 'out-in',
    onBeforeEnter: (el) => {
      console.log('Before enter...')
    },
    onEnter: (el, done) => {},
    onAfterEnter: (el) => {},
  },
})
</script>
```

::tip
Подробнее о [JavaScript-хуках](https://vuejs.org/guide/built-ins/transition#javascript-hooks) компонента `Transition`.
::

## Динамические переходы

Чтобы задать переход по условию, используйте [inline middleware](/docs/4.x/directory-structure/app/middleware) и меняйте `to.meta.pageTransition`:

::code-group

```vue twoslash [pages/[id\\].vue]
<script setup lang="ts">
definePageMeta({
  pageTransition: {
    name: 'slide-right',
    mode: 'out-in',
  },
  middleware (to, from) {
    if (to.meta.pageTransition && typeof to.meta.pageTransition !== 'boolean') {
      to.meta.pageTransition.name = +to.params.id! > +from.params.id! ? 'slide-left' : 'slide-right'
    }
  },
})
</script>

<template>
  <h1>#{{ $route.params.id }}</h1>
</template>

<style>
.slide-left-enter-active,
.slide-left-leave-active,
.slide-right-enter-active,
.slide-right-leave-active {
  transition: all 0.2s;
}
.slide-left-enter-from {
  opacity: 0;
  transform: translate(50px, 0);
}
.slide-left-leave-to {
  opacity: 0;
  transform: translate(-50px, 0);
}
.slide-right-enter-from {
  opacity: 0;
  transform: translate(-50px, 0);
}
.slide-right-leave-to {
  opacity: 0;
  transform: translate(50px, 0);
}
</style>
```

```vue [app/layouts/default.vue]
<script setup lang="ts">
const route = useRoute()
const id = computed(() => Number(route.params.id || 1))
const prev = computed(() => '/' + (id.value - 1))
const next = computed(() => '/' + (id.value + 1))
</script>

<template>
  <div>
    <slot />
    <div v-if="$route.params.id">
      <NuxtLink :to="prev">⬅️</NuxtLink> |
      <NuxtLink :to="next">➡️</NuxtLink>
    </div>
  </div>
</template>
```

::

При переходе к следующему id будет `slide-left`, к предыдущему — `slide-right`:

<video controls class="rounded" poster="https://res.cloudinary.com/nuxt/video/upload/v1665069410/nuxt3/nuxt-dynamic-page-transitions.jpg">
  <source src="https://res.cloudinary.com/nuxt/video/upload/v1665069410/nuxt3/nuxt-dynamic-page-transitions.mp4" type="video/mp4">
</video>

## Переход с NuxtPage

Когда `<NuxtPage />` используется в `app.vue`, переход можно задать пропом `transition`:

```vue [app/app.vue]
<template>
  <div>
    <NuxtLayout>
      <NuxtPage
        :transition="{
          name: 'bounce',
          mode: 'out-in',
        }"
      />
    </NuxtLayout>
  </div>
</template>
```

::note
Такой переход страницы нельзя переопределить через `definePageMeta` на отдельных страницах.
::

## View Transitions API (экспериментально)

В Nuxt есть экспериментальная поддержка [**View Transitions API**](https://developer.chrome.com/docs/web-platform/view-transitions) ([MDN](https://developer.mozilla.org/en-US/docs/Web/API/View_Transition_API)) — нативных переходов браузера, в том числе между разными элементами на разных страницах.

Демо: [StackBlitz](https://stackblitz.com/edit/nuxt-view-transitions).

Включение в конфиге:

```ts twoslash [nuxt.config.ts]
export default defineNuxtConfig({
  experimental: {
    viewTransition: true,
  },
})
```

Допустимые значения: `false`, `true` или `'always'`.

При `true` Nuxt не применяет переходы, если у пользователя включён `prefers-reduced-motion: reduce` (рекомендуется). При `'always'` переходы всегда применяются — учитывать предпочтение пользователя нужно самостоятельно.

По умолчанию view transitions включены для всех [страниц](/docs/4.x/directory-structure/app/pages). Глобальное значение по умолчанию можно изменить:

```ts twoslash [nuxt.config.ts]
export default defineNuxtConfig({
  app: {
    // Отключить глобально, включать по страницам
    viewTransition: false,
  },
})
```

Для страницы значение переопределяется ключом `viewTransition` в [`definePageMeta`](/docs/4.x/api/utils/define-page-meta):

```vue twoslash [pages/about.vue]
<script setup lang="ts">
definePageMeta({
  viewTransition: false,
})
</script>
```

::warning
Переопределение view transitions по страницам действует только при включённой опции `experimental.viewTransition`.
::

Если вы используете Vue-переходы (`pageTransition`, `layoutTransition`) и хотите отключить их при поддержке View Transitions API в браузере, создайте `~/middleware/disable-vue-transitions.global.ts`:

```ts
export default defineNuxtRouteMiddleware((to) => {
  if (import.meta.server || !document.startViewTransition) {
    return
  }

  to.meta.pageTransition = false
  to.meta.layoutTransition = false
})
```

### Известные ограничения

- При загрузке данных в setup-функциях страницы использование этой возможности может быть нежелательно: View Transitions полностью замораживают обновления DOM на время перехода. Рассматривается ограничение перехода моментом перед разрешением `<Suspense>`. Пока что оцените, подходит ли вам эта возможность.
