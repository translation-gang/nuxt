---
title: –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—é
description: –ö–∞–∫ –æ–±–Ω–æ–≤–∏—Ç—å—Å—è –¥–æ –ø–æ—Å–ª–µ–¥–Ω–µ–π –≤–µ—Ä—Å–∏–∏ Nuxt.
navigation.icon: i-lucide-circle-arrow-up
---

## –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Nuxt

### –ü–æ—Å–ª–µ–¥–Ω–∏–π —Ä–µ–ª–∏–∑

–ß—Ç–æ–±—ã –æ–±–Ω–æ–≤–∏—Ç—å—Å—è –¥–æ [–ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Ä–µ–ª–∏–∑–∞](https://github.com/nuxt/nuxt/releases), –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É `nuxt upgrade`.

::code-group{sync="pm"}

```bash [npm]
npx nuxt upgrade
```

```bash [yarn]
yarn nuxt upgrade
```

```bash [pnpm]
pnpm nuxt upgrade
```

```bash [bun]
bun x nuxt upgrade
```

```bash [deno]
deno x nuxt upgrade
```

::

### –ö–∞–Ω–∞–ª Nightly

–ß—Ç–æ–±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–≤–µ–∂–∏–µ —Å–±–æ—Ä–∫–∏ Nuxt –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏ –¥–æ —Ä–µ–ª–∏–∑–∞, —Å–º. [–∫–∞–Ω–∞–ª nightly](/docs/4.x/guide/going-further/nightly-release-channel).

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Nuxt 5

Nuxt 5 **—Å–µ–π—á–∞—Å –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ**. –î–æ —Ä–µ–ª–∏–∑–∞ –º–Ω–æ–≥–∏–µ breaking changes –º–æ–∂–Ω–æ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —É–∂–µ –≤ Nuxt 4.2+.

### –í–∫–ª—é—á–µ–Ω–∏–µ —Ä–µ–∂–∏–º–∞ Nuxt 5

–°–Ω–∞—á–∞–ª–∞ –æ–±–Ω–æ–≤–∏—Ç–µ Nuxt –¥–æ [–ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Ä–µ–ª–∏–∑–∞](https://github.com/nuxt/nuxt/releases).

–ó–∞—Ç–µ–º –∑–∞–¥–∞–π—Ç–µ `future.compatibilityVersion: 5` –¥–ª—è –ø–æ–≤–µ–¥–µ–Ω–∏—è Nuxt 5:

```ts twoslash [nuxt.config.ts]
export default defineNuxtConfig({
  future: {
    compatibilityVersion: 5,
  },
})
```

–ü—Ä–∏ `future.compatibilityVersion: 5` –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Nuxt –ø–µ—Ä–µ–∫–ª—é—á–∞—é—Ç—Å—è –Ω–∞ –ø–æ–≤–µ–¥–µ–Ω–∏–µ Nuxt v5:

- **Vite Environment API**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–∫–ª—é—á–∞–µ—Ç—Å—è –Ω–æ–≤—ã–π [Vite Environment API](/docs/4.x/getting-started/upgrade#migration-to-vite-environment-api) –¥–ª—è —É–ª—É—á—à–µ–Ω–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Å–±–æ—Ä–∫–∏
- –û—Å—Ç–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è Nuxt 5 –ø–æ –º–µ—Ä–µ –ø–æ—è–≤–ª–µ–Ω–∏—è

::note
–†–∞–∑–¥–µ–ª –º–æ–∂–µ—Ç –º–µ–Ω—è—Ç—å—Å—è –¥–æ —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ —Ä–µ–ª–∏–∑–∞; –ø—Ä–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ Nuxt 5 —Å `future.compatibilityVersion: 5` –∑–∞–≥–ª—è–¥—ã–≤–∞–π—Ç–µ —Å—é–¥–∞ —Ä–µ–≥—É–ª—è—Ä–Ω–æ.
::

–ö—Ä–∏—Ç–∏—á–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω—ã –Ω–∏–∂–µ –≤–º–µ—Å—Ç–µ —Å —à–∞–≥–∞–º–∏ –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏.

### –ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ Vite Environment API

üö¶ **–£—Ä–æ–≤–µ–Ω—å –≤–ª–∏—è–Ω–∏—è**: —Å—Ä–µ–¥–Ω–∏–π

#### –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

Nuxt 5 –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –Ω–∞ –Ω–æ–≤—ã–π [Environment API](https://vite.dev/guide/api-environment) Vite 6: —Ñ–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–æ –ø–æ–Ω—è—Ç–∏–µ –æ–∫—Ä—É–∂–µ–Ω–∏–π –∏ —É–ª—É—á—à–µ–Ω –∫–æ–Ω—Ç—Ä–æ–ª—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ.

–†–∞–Ω—å—à–µ Nuxt –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∫–æ–Ω—Ñ–∏–≥–∏ Vite –¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞ –∏ —Å–µ—Ä–≤–µ—Ä–∞. –¢–µ–ø–µ—Ä—å ‚Äî –æ–±—â–∏–π –∫–æ–Ω—Ñ–∏–≥ Vite —Å –ø–ª–∞–≥–∏–Ω–∞–º–∏ –ø–æ–¥ –æ–∫—Ä—É–∂–µ–Ω–∏—è —á–µ—Ä–µ–∑ –º–µ—Ç–æ–¥ `applyToEnvironment()`.

::tip
–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∑–∞—Ä–∞–Ω–µ–µ: –∑–∞–¥–∞—Ç—å `future.compatibilityVersion: 5` (—Å–º. [–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Nuxt 5](/docs/4.x/getting-started/upgrade#testing-nuxt-5)) –∏–ª–∏ —è–≤–Ω–æ –≤–∫–ª—é—á–∏—Ç—å `experimental.viteEnvironmentApi: true`.
::

**–û—Å–Ω–æ–≤–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:**

1. **–£—Å—Ç–∞—Ä–µ–ª–∏ –æ–ø—Ü–∏–∏ –æ–∫—Ä—É–∂–µ–Ω–∏–π –≤ `extendViteConfig()`**: –æ–ø—Ü–∏–∏ `server` –∏ `client` –≤ `extendViteConfig()` —É—Å—Ç–∞—Ä–µ–ª–∏, –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –≤—ã–≤–æ–¥—è—Ç—Å—è –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è.

2. **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–ª–∞–≥–∏–Ω–æ–≤**: —É –ø–ª–∞–≥–∏–Ω–æ–≤ Vite, –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ `addVitePlugin()` –∏ –Ω–∞—Ü–µ–ª–µ–Ω–Ω—ã—Ö —Ç–æ–ª—å–∫–æ –Ω–∞ –æ–¥–Ω–æ –æ–∫—Ä—É–∂–µ–Ω–∏–µ (`server: false` –∏–ª–∏ `client: false`), —Ö—É–∫–∏ `config` –∏ `configResolved` –Ω–µ –≤—ã–∑—ã–≤–∞—é—Ç—Å—è.

3. **–û–±—â–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**: —Ö—É–∫–∏ `vite:extendConfig` –∏ `vite:configResolved` —Ä–∞–±–æ—Ç–∞—é—Ç —Å –æ–±—â–µ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π –≤–º–µ—Å—Ç–æ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–π –∏ —Å–µ—Ä–≤–µ—Ä–Ω–æ–π.

#### –ü—Ä–∏—á–∏–Ω—ã –∏–∑–º–µ–Ω–µ–Ω–∏–π

Vite Environment API –¥–∞—ë—Ç:
- –ë–æ–ª–µ–µ –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –≤ dev –∏ production
- –¢–æ—á–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è–º
- –£–ª—É—á—à–µ–Ω–Ω—É—é –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –ø–ª–∞–≥–∏–Ω–æ–≤
- –ü–æ–¥–¥–µ—Ä–∂–∫—É –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏–π, –Ω–µ —Ç–æ–ª—å–∫–æ client/server

#### –®–∞–≥–∏ –º–∏–≥—Ä–∞—Ü–∏–∏

##### 1. –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –ø–ª–∞–≥–∏–Ω—ã Vite

–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–ª–∞–≥–∏–Ω Vite –≤–º–µ—Å—Ç–æ `extendViteConfig`, `vite:configResolved` –∏ `vite:extendConfig`.

```ts
// –ë—ã–ª–æ
extendViteConfig((config) => {
  config.optimizeDeps.include.push('my-package')
}, { server: false })

nuxt.hook('vite:extendConfig' /* or vite:configResolved */, (config, { isClient }) => {
  if (isClient) {
    config.optimizeDeps.include.push('my-package')
  }
})

// –°—Ç–∞–ª–æ
addVitePlugin(() => ({
  name: 'my-plugin',
  config (config) {
    // –∑–¥–µ—Å—å –º–æ–∂–Ω–æ –∑–∞–¥–∞—Ç—å –≥–ª–æ–±–∞–ª—å–Ω—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é Vite
  },
  configResolved (config) {
    // –∑–¥–µ—Å—å –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–∑—Ä–µ—à—ë–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Vite
  },
  configEnvironment (name, config) {
    // –∑–¥–µ—Å—å ‚Äî –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è
    if (name === 'client') {
      config.optimizeDeps ||= {}
      config.optimizeDeps.include ||= []
      config.optimizeDeps.include.push('my-package')
    }
  },
  applyToEnvironment (environment) {
    return environment.name === 'client'
  },
}))
```

##### 2. –ü–µ—Ä–µ—Ö–æ–¥ –ø–ª–∞–≥–∏–Ω–æ–≤ Vite –Ω–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–í–º–µ—Å—Ç–æ `addVitePlugin` —Å `server: false` –∏–ª–∏ `client: false` –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤ –ø–ª–∞–≥–∏–Ω–µ —Ö—É–∫ `applyToEnvironment`.

```ts
// –ë—ã–ª–æ
addVitePlugin(() => ({
  name: 'my-plugin',
  config (config) {
    config.optimizeDeps.include.push('my-package')
  },
}), { client: false })

// –°—Ç–∞–ª–æ
addVitePlugin(() => ({
  name: 'my-plugin',
  config (config) {
    // –∑–¥–µ—Å—å –º–æ–∂–Ω–æ –∑–∞–¥–∞—Ç—å –≥–ª–æ–±–∞–ª—å–Ω—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é Vite
  },
  configResolved (config) {
    // –∑–¥–µ—Å—å –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–∑—Ä–µ—à—ë–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Vite
  },
  configEnvironment (name, config) {
    // –∑–¥–µ—Å—å ‚Äî –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è
    if (name === 'client') {
      config.optimizeDeps ||= {}
      config.optimizeDeps.include ||= []
      config.optimizeDeps.include.push('my-package')
    }
  },
  applyToEnvironment (environment) {
    return environment.name === 'client'
  },
}))
```

::read-more{to="https://vite.dev/guide/api-environment" target="_blank"}
–ü–æ–¥—Ä–æ–±–Ω–µ–µ –æ–± Environment API Vite
::

## –ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ Nuxt 4

Nuxt 4 –≤–Ω–æ—Å–∏—Ç —Å—É—â–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è. –≠—Ç–æ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ–º–æ–∂–µ—Ç –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å Nuxt 3 –Ω–∞ Nuxt 4.

–°–Ω–∞—á–∞–ª–∞ –æ–±–Ω–æ–≤–∏—Ç–µ—Å—å –¥–æ Nuxt 4:

::code-group{sync="pm"}

```bash [npm]
npm install nuxt@^4.0.0
```

```bash [yarn]
yarn add nuxt@^4.0.0
```

```bash [pnpm]
pnpm add nuxt@^4.0.0
```

```bash [bun]
bun add nuxt@^4.0.0
```

```bash [deno]
deno add npm:nuxt@^4.0.0
```

::

–ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ–≤–µ–¥–µ–Ω–∏–µ Nuxt 4 –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤–∫–ª—é—á–µ–Ω–æ. –ß–∞—Å—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ –≤–æ –≤—Ä–µ–º—è –º–∏–≥—Ä–∞—Ü–∏–∏.

–ù–∏–∂–µ ‚Äî –æ—Å–Ω–æ–≤–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏ —à–∞–≥–∏ –º–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –Ω–∞ Nuxt 4.

–ö—Ä–∏—Ç–∏—á–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –æ–ø–∏—Å–∞–Ω—ã –≤–º–µ—Å—Ç–µ —Å —à–∞–≥–∞–º–∏ –º–∏–≥—Ä–∞—Ü–∏–∏ –∏ –¥–æ—Å—Ç—É–ø–Ω—ã–º–∏ –æ–ø—Ü–∏—è–º–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.

### –ú–∏–≥—Ä–∞—Ü–∏—è —Å –ø–æ–º–æ—â—å—é Codemods

–í–º–µ—Å—Ç–µ —Å –∫–æ–º–∞–Ω–¥–æ–π [Codemod](https://github.com/codemod/codemod) –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω—ã –æ—Ç–∫—Ä—ã—Ç—ã–µ codemods –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –º–Ω–æ–≥–∏—Ö —à–∞–≥–æ–≤ –º–∏–≥—Ä–∞—Ü–∏–∏.

::note
–û –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å codemods —Å–æ–æ–±—â–∞–π—Ç–µ –∫–æ–º–∞–Ω–¥–µ Codemod: `npx codemod feedback` üôè
::

–ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ codemods –¥–ª—è Nuxt 4, –æ–ø–∏—Å–∞–Ω–∏–µ –∏ —Å–ø–æ—Å–æ–±—ã –∑–∞–ø—É—Å–∫–∞ ‚Äî –≤ [Codemod Registry](https://app.codemod.com/registry).

–í—Å–µ codemods –∏–∑ —ç—Ç–æ–≥–æ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞ –º–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –æ–¥–Ω–∏–º —Ä–µ—Ü–µ–ø—Ç–æ–º:

::code-group

```bash [npm]
# Using pinned version due to https://github.com/codemod/codemod/issues/1710
npx codemod@0.18.7 nuxt/4/migration-recipe
```

```bash [yarn]
# Using pinned version due to https://github.com/codemod/codemod/issues/1710
yarn dlx codemod@0.18.7 nuxt/4/migration-recipe
```

```bash [pnpm]
# Using pinned version due to https://github.com/codemod/codemod/issues/1710
pnpm dlx codemod@0.18.7 nuxt/4/migration-recipe
```

```bash [bun]
# Using pinned version due to https://github.com/codemod/codemod/issues/1710
bun x codemod@0.18.7 nuxt/4/migration-recipe
```

```bash [deno]
# Using pinned version due to https://github.com/codemod/codemod/issues/1710
deno x codemod@0.18.7 nuxt/4/migration-recipe
```

::

–ö–æ–º–∞–Ω–¥–∞ –≤—ã–ø–æ–ª–Ω–∏—Ç –≤—Å–µ codemods –ø–æ –æ—á–µ—Ä–µ–¥–∏; –Ω–µ–Ω—É–∂–Ω—ã–µ –º–æ–∂–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å. –ö–∞–∂–¥—ã–π codemod –æ–ø–∏—Å–∞–Ω –Ω–∏–∂–µ —Ä—è–¥–æ–º —Å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º –∏ –º–æ–∂–µ—Ç –±—ã—Ç—å –∑–∞–ø—É—â–µ–Ω –æ—Ç–¥–µ–ª—å–Ω–æ.

### –ù–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–∞—Ç–∞–ª–æ–≥–æ–≤

üö¶ **–£—Ä–æ–≤–µ–Ω—å –≤–ª–∏—è–Ω–∏—è**: –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã–π

–í Nuxt 4 –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–∞—Ç–∞–ª–æ–≥–æ–≤; –ø—Ä–∏ —ç—Ç–æ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –æ–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å (–µ—Å–ª–∏ Nuxt –≤–∏–¥–∏—Ç —Å—Ç–∞—Ä—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É, –Ω–∞–ø—Ä–∏–º–µ—Ä `app/pages/` –≤ –∫–æ—Ä–Ω–µ, –Ω–æ–≤–∞—è –Ω–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è).

üëâ [–ü–æ–ª–Ω—ã–π RFC](https://github.com/nuxt/nuxt/issues/26444)

#### –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

- –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é `srcDir` ‚Äî `app/`, –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –ø—É—Ç–µ–π —Ä–∞–∑—Ä–µ—à–∞–µ—Ç—Å—è –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –Ω–µ—ë.
- `serverDir` –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `<rootDir>/server`, –∞ –Ω–µ `<srcDir>/server`.
- `layers/`, `modules/` –∏ `public/` –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Ä–∞–∑—Ä–µ—à–∞—é—Ç—Å—è –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ `<rootDir>`.
- –ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ [Nuxt Content v2.13+](https://github.com/nuxt/content/pull/2649) –∫–∞—Ç–∞–ª–æ–≥ `content/` —Ä–∞–∑—Ä–µ—à–∞–µ—Ç—Å—è –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ `<rootDir>`.
- –î–æ–±–∞–≤–ª–µ–Ω `dir.app` ‚Äî –∫–∞—Ç–∞–ª–æ–≥, –≤ –∫–æ—Ç–æ—Ä–æ–º –∏—â—É—Ç—Å—è `router.options.ts` –∏ `spa-loading-template.html` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `<srcDir>/`).

<details>

<summary>–ü—Ä–∏–º–µ—Ä —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∫–∞—Ç–∞–ª–æ–≥–æ–≤ –≤ v4.</summary>

```sh
.output/
.nuxt/
app/
  assets/
  components/
  composables/
  layouts/
  middleware/
  pages/
  plugins/
  utils/
  app.config.ts
  app.vue
  router.options.ts
content/
layers/
modules/
node_modules/
public/
shared/
server/
  api/
  middleware/
  plugins/
  routes/
  utils/
nuxt.config.ts
```

::note
–ü—Ä–∏ –Ω–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–µ –∞–ª–∏–∞—Å `~` –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –∫–∞—Ç–∞–ª–æ–≥ `app/` (–≤–∞—à `srcDir`). –¢–æ –µ—Å—Ç—å `~/components` ‚Üí `app/components/`, `~/pages` ‚Üí `app/pages/` –∏ —Ç.–¥.
::

</details>

üëâ –ü–æ–¥—Ä–æ–±–Ω–µ–µ: [PR —Å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–µ–π](https://github.com/nuxt/nuxt/pull/27029).

#### –ü—Ä–∏—á–∏–Ω—ã –∏–∑–º–µ–Ω–µ–Ω–∏–π

1. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** ‚Äî —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ –≤—Å–µ–≥–æ –∫–æ–¥–∞ –≤ –∫–æ—Ä–Ω–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—é `.git/` –∏ `node_modules/` —Ñ–∞–π–ª–æ–≤—ã–º–∏ watchers –∏ –∑–∞–º–µ–¥–ª–µ–Ω–∏—é –∑–∞–ø—É—Å–∫–∞ (–æ—Å–æ–±–µ–Ω–Ω–æ –Ω–µ –Ω–∞ macOS).
2. **–¢–∏–ø–∏–∑–∞—Ü–∏—è –≤ IDE** ‚Äî `server/` –∏ –æ—Å—Ç–∞–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞—é—Ç –≤ —Ä–∞–∑–Ω—ã—Ö –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞—Ö —Å —Ä–∞–∑–Ω—ã–º–∏ –≥–ª–æ–±–∞–ª—å–Ω—ã–º–∏ –∏–º–ø–æ—Ä—Ç–∞–º–∏; –≤—ã–Ω–æ—Å `server/` –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —É–ª—É—á—à–∞–µ—Ç –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –≤ IDE.

:video-accordion{title="–í–∏–¥–µ–æ Vue School –æ –Ω–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–µ –∫–∞—Ç–∞–ª–æ–≥–æ–≤" videoId="1031028378" platform="vimeo"}

#### –®–∞–≥–∏ –º–∏–≥—Ä–∞—Ü–∏–∏

1. –°–æ–∑–¥–∞–π—Ç–µ –∫–∞—Ç–∞–ª–æ–≥ `app/`.
2. –ü–µ—Ä–µ–Ω–µ—Å–∏—Ç–µ –≤ –Ω–µ–≥–æ `assets/`, `components/`, `composables/`, `layouts/`, `middleware/`, `pages/`, `plugins/`, `utils/`, –∞ —Ç–∞–∫–∂–µ `app.vue`, `error.vue`, `app.config.ts`. –ü—É—Ç–∏ –∫ `router.options.ts` –∏ `spa-loading-template.html` –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –æ—Å—Ç–∞—é—Ç—Å—è –≤ `app/`.
3. –û—Å—Ç–∞–≤—å—Ç–µ –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ (–≤–Ω–µ `app/`): `nuxt.config.ts`, `content/`, `layers/`, `modules/`, `public/`, `server/`.
4. –û–±–Ω–æ–≤–∏—Ç–µ –∫–æ–Ω—Ñ–∏–≥–∏ —Å—Ç–æ—Ä–æ–Ω–Ω–∏—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ (tailwindcss, eslint –∏ —Ç.–¥.) –ø–æ–¥ –Ω–æ–≤—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É. `@nuxtjs/tailwindcss` –æ–±—ã—á–Ω–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç tailwind –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

::tip
–ú–∏–≥—Ä–∞—Ü–∏—é –º–æ–∂–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å: `npx codemod@latest nuxt/4/file-structure`
::

–ú–∏–≥—Ä–∞—Ü–∏—è –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞: –ø—Ä–∏ —Ç–µ–∫—É—â–µ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–µ Nuxt –¥–æ–ª–∂–µ–Ω –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –µ—ë —Å–∞–º (–µ—Å–ª–∏ –Ω–µ—Ç ‚Äî —Å–æ–∑–¥–∞–π—Ç–µ issue). –ò—Å–∫–ª—é—á–µ–Ω–∏–µ ‚Äî –∫–∞—Å—Ç–æ–º–Ω—ã–π `srcDir`: —Ç–æ–≥–¥–∞ `modules/`, `public/` –∏ `server/` —Ä–∞–∑—Ä–µ—à–∞—é—Ç—Å—è –æ—Ç `rootDir`, –∞ –Ω–µ –æ—Ç `srcDir`. –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –º–æ–∂–Ω–æ —á–µ—Ä–µ–∑ `dir.modules`, `dir.public` –∏ `serverDir`.

–í–µ—Ä–Ω—É—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∫–∞—Ç–∞–ª–æ–≥–æ–≤ –∫–∞–∫ –≤ v3 –º–æ–∂–Ω–æ —Ç–∞–∫–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π:

```ts [nuxt.config.ts]
export default defineNuxtConfig({
  // –í–æ–∑–≤—Ä–∞—Ç srcDir –≤ –∫–æ—Ä–µ–Ω—å –ø—Ä–æ–µ–∫—Ç–∞
  srcDir: '.',
  // –ö–∞—Ç–∞–ª–æ–≥ –¥–ª—è router.options.ts –∏ spa-loading-template.html
  dir: {
    app: 'app',
  },
})
```

### –ï–¥–∏–Ω—ã–π —Å–ª–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö

üö¶ **–£—Ä–æ–≤–µ–Ω—å –≤–ª–∏—è–Ω–∏—è**: —Å—Ä–µ–¥–Ω–∏–π

#### –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

–°–∏—Å—Ç–µ–º–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö Nuxt (`useAsyncData` –∏ `useFetch`) –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∞–Ω–∞ –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–∏—è:

1. **–û–±—â–∏–µ ref –ø—Ä–∏ –æ–¥–Ω–æ–º –∫–ª—é—á–µ**: –≤—Å–µ –≤—ã–∑–æ–≤—ã `useAsyncData`/`useFetch` —Å –æ–¥–Ω–∏–º –∫–ª—é—á–æ–º –∏—Å–ø–æ–ª—å–∑—É—é—Ç –æ–¥–Ω–∏ –∏ —Ç–µ –∂–µ refs `data`, `error` –∏ `status`. –í–∞–∂–Ω–æ, —á—Ç–æ–±—ã –ø—Ä–∏ —è–≤–Ω–æ–º –∫–ª—é—á–µ –Ω–µ –±—ã–ª–æ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É—é—â–∏—Ö –æ–ø—Ü–∏–π `deep`, `transform`, `pick`, `getCachedData` –∏–ª–∏ `default`.

2. **–ö–æ–Ω—Ç—Ä–æ–ª—å `getCachedData`**: —Ñ—É–Ω–∫—Ü–∏—è `getCachedData` —Ç–µ–ø–µ—Ä—å –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–π –∑–∞–≥—Ä—É–∑–∫–µ, –≤ —Ç–æ–º —á–∏—Å–ª–µ –ø—Ä–∏ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–∏ watcher –∏–ª–∏ –≤—ã–∑–æ–≤–µ `refreshNuxtData`. (–†–∞–Ω—å—à–µ –≤ —ç—Ç–∏—Ö —Å–ª—É—á–∞—è—Ö –¥–∞–Ω–Ω—ã–µ –≤—Å–µ–≥–¥–∞ –∑–∞–ø—Ä–∞—à–∏–≤–∞–ª–∏—Å—å –∑–∞–Ω–æ–≤–æ, –∞ —Ñ—É–Ω–∫—Ü–∏—è –Ω–µ –≤—ã–∑—ã–≤–∞–ª–∞—Å—å.) –î–ª—è –≥–∏–±–∫–æ–≥–æ –≤—ã–±–æ—Ä–∞ ¬´–∫—ç—à –∏–ª–∏ –ø–æ–≤—Ç–æ—Ä–Ω—ã–π –∑–∞–ø—Ä–æ—Å¬ª —Ñ—É–Ω–∫—Ü–∏—è –ø–æ–ª—É—á–∞–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç —Å –ø—Ä–∏—á–∏–Ω–æ–π –∑–∞–ø—Ä–æ—Å–∞.

3. **–†–µ–∞–∫—Ç–∏–≤–Ω—ã–µ –∫–ª—é—á–∏**: –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∫–ª—é—á–∞ –º–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å computed ref, –æ–±—ã—á–Ω—ã–π ref –∏–ª–∏ getter ‚Äî –¥–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç –ø–µ—Ä–µ–∑–∞–ø—Ä–∞—à–∏–≤–∞—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏ —Ö—Ä–∞–Ω–∏—Ç—å—Å—è —Ä–∞–∑–¥–µ–ª—å–Ω–æ.

4. **–û—á–∏—Å—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö**: –∫–æ–≥–¥–∞ —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è –ø–æ—Å–ª–µ–¥–Ω–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–π –¥–∞–Ω–Ω—ã–µ –ø–æ –∫–ª—é—á—É, Nuxt —É–¥–∞–ª—è–µ—Ç —ç—Ç–∏ –¥–∞–Ω–Ω—ã–µ, —á—Ç–æ–±—ã –Ω–µ —Ä–∞–∑–¥—É–≤–∞—Ç—å –ø–∞–º—è—Ç—å.

#### –ü—Ä–∏—á–∏–Ω—ã –∏–∑–º–µ–Ω–µ–Ω–∏–π

–¶–µ–ª—å ‚Äî —Å–Ω–∏–∑–∏—Ç—å –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏ –∏ —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –º–µ–∂–¥—É –≤—ã–∑–æ–≤–∞–º–∏ `useAsyncData`.

#### –®–∞–≥–∏ –º–∏–≥—Ä–∞—Ü–∏–∏

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å –æ–ø—Ü–∏–π**: –Ω–∞–π–¥–∏—Ç–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, –≥–¥–µ –æ–¥–∏–Ω –∫–ª—é—á –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å —Ä–∞–∑–Ω—ã–º–∏ –æ–ø—Ü–∏—è–º–∏ –∏–ª–∏ —Ä–∞–∑–Ω—ã–º–∏ —Ñ—É–Ω–∫—Ü–∏—è–º–∏ –∑–∞–ø—Ä–æ—Å–∞.

   ```ts
   // This will now trigger a warning
   const { data: users1 } = useAsyncData('users', () => $fetch('/api/users'), { deep: false })
   const { data: users2 } = useAsyncData('users', () => $fetch('/api/users'), { deep: true })
   ```

   –í—ã–Ω–µ—Å–∏—Ç–µ –≤—ã–∑–æ–≤—ã `useAsyncData` —Å –æ–±—â–∏–º –∫–ª—é—á–æ–º –∏ –∫–∞—Å—Ç–æ–º–Ω—ã–º–∏ –æ–ø—Ü–∏—è–º–∏ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π –∫–æ–º–ø–æ–∑–∞–±–ª:

   ```ts [app/composables/useUserData.ts]
   export function useUserData (userId: string) {
     return useAsyncData(
       `user-${userId}`,
       () => fetchUser(userId),
       {
         deep: true,
         transform: user => ({ ...user, lastAccessed: new Date() }),
       },
     )
   }
   ```

2. **–û–±–Ω–æ–≤–∏—Ç–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ `getCachedData`**:

   ```diff
   useAsyncData('key', fetchFunction, {
   -  getCachedData: (key, nuxtApp) => {
   -    return cachedData[key]
   -  }
   +  getCachedData: (key, nuxtApp, ctx) => {
   +    // ctx.cause ‚Äî 'initial' | 'refresh:hook' | 'refresh:manual' | 'watch'
   +    
   +    // –ü—Ä–∏–º–µ—Ä: –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫—ç—à –ø—Ä–∏ —Ä—É—á–Ω–æ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏
   +    if (ctx.cause === 'refresh:manual') return undefined
   +    
   +    return cachedData[key]
   +  }
   })
   ```

–í—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å —ç—Ç–æ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –º–æ–∂–Ω–æ —Ç–∞–∫:

```ts twoslash [nuxt.config.ts]
export default defineNuxtConfig({
  experimental: {
    granularCachedData: false,
    purgeCachedData: false,
  },
})
```

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ –∑–∞–≥—Ä—É–∑–∫–∏ –º–æ–¥—É–ª–µ–π –≤ —Å–ª–æ—è—Ö

üö¶ **–£—Ä–æ–≤–µ–Ω—å –≤–ª–∏—è–Ω–∏—è**: –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π

#### –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

–ò—Å–ø—Ä–∞–≤–ª–µ–Ω –ø–æ—Ä—è–¥–æ–∫ –∑–∞–≥—Ä—É–∑–∫–∏ –º–æ–¥—É–ª–µ–π –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ [—Å–ª–æ—ë–≤ Nuxt](/docs/4.x/guide/going-further/layers). –†–∞–Ω—å—à–µ –º–æ–¥—É–ª–∏ –∏–∑ –∫–æ—Ä–Ω—è –ø—Ä–æ–µ–∫—Ç–∞ –∑–∞–≥—Ä—É–∂–∞–ª–∏—Å—å —Ä–∞–Ω—å—à–µ –º–æ–¥—É–ª–µ–π –∏–∑ —Ä–∞—Å—à–∏—Ä—è–µ–º—ã—Ö —Å–ª–æ—ë–≤ ‚Äî –Ω–∞–æ–±–æ—Ä–æ—Ç –æ–∂–∏–¥–∞–µ–º–æ–º—É.

–¢–µ–ø–µ—Ä—å –ø–æ—Ä—è–¥–æ–∫ —Ç–∞–∫–æ–π:

1. **–°–Ω–∞—á–∞–ª–∞ –º–æ–¥—É–ª–∏ —Å–ª–æ—ë–≤** (–≤ –ø–æ—Ä—è–¥–∫–µ extends ‚Äî –±–æ–ª–µ–µ –≥–ª—É–±–æ–∫–∏–µ —Å–ª–æ–∏ –ø–µ—Ä–≤—ã–º–∏)
2. **–ó–∞—Ç–µ–º –º–æ–¥—É–ª–∏ –ø—Ä–æ–µ–∫—Ç–∞** (–Ω–∞–∏–≤—ã—Å—à–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)

–≠—Ç–æ –∫–∞—Å–∞–µ—Ç—Å—è –∏ –º–æ–¥—É–ª–µ–π –∏–∑ –º–∞—Å—Å–∏–≤–∞ `modules` –≤ `nuxt.config.ts`, –∏ –∞–≤—Ç–æ–æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ–º—ã—Ö –≤ –∫–∞—Ç–∞–ª–æ–≥–µ `modules/`.

#### –ü—Ä–∏—á–∏–Ω—ã –∏–∑–º–µ–Ω–µ–Ω–∏–π

–¢–∞–∫ –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç—Å—è:
- –º–µ–Ω—å—à–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç —Å–ª–æ—ë–≤ –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å –ø—Ä–æ–µ–∫—Ç–æ–º
- –∏–Ω—Ç—É–∏—Ç–∏–≤–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø—Ä–∏ –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–∏ —Å–ª–æ—ë–≤
- –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏ —Ö—É–∫–æ–≤ –≤ –º–Ω–æ–≥–æ—Å–ª–æ–π–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–µ

#### –®–∞–≥–∏ –º–∏–≥—Ä–∞—Ü–∏–∏

**–í –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ –ø—Ä–æ–µ–∫—Ç–æ–≤ –º–µ–Ω—è—Ç—å –Ω–∏—á–µ–≥–æ –Ω–µ –Ω—É–∂–Ω–æ** ‚Äî –ø–æ—Ä—è–¥–æ–∫ –ø—Ä–∏–≤–µ–¥—ë–Ω –∫ –æ–∂–∏–¥–∞–µ–º–æ–º—É.

–ï—Å–ª–∏ –≤—ã –ø–æ–ª–∞–≥–∞–ª–∏—Å—å –Ω–∞ —Å—Ç–∞—Ä—ã–π –ø–æ—Ä—è–¥–æ–∫, –≤–æ–∑–º–æ–∂–Ω–æ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è:

1. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –º–æ–¥—É–ª–µ–π**: –µ—Å—Ç—å –ª–∏ –º–æ–¥—É–ª–∏, –∑–∞–≤–∏—Å—è—â–∏–µ –æ—Ç –ø–æ—Ä—è–¥–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏.
2. **–°–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é**: –µ—Å–ª–∏ –æ–Ω–∞ –æ–±—Ö–æ–¥–∏–ª–∞ —Å—Ç–∞—Ä—ã–π –ø–æ—Ä—è–¥–æ–∫.
3. **–ü—Ä–æ–≥–Ω–∞—Ç—å —Ç–µ—Å—Ç—ã**: —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∏ –Ω–æ–≤–æ–º –ø–æ—Ä—è–¥–∫–µ.

–ü—Ä–∏–º–µ—Ä –Ω–æ–≤–æ–≥–æ –ø–æ—Ä—è–¥–∫–∞:
```ts
// Layer: my-layer/nuxt.config.ts
export default defineNuxtConfig({
  modules: ['layer-module-1', 'layer-module-2'],
})

// Project: nuxt.config.ts
export default defineNuxtConfig({
  extends: ['./my-layer'],
  modules: ['project-module-1', 'project-module-2'],
})

// –ü–æ—Ä—è–¥–æ–∫ –∑–∞–≥—Ä—É–∑–∫–∏ (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π):
// 1. layer-module-1
// 2. layer-module-2
// 3. project-module-1 (–º–æ–∂–µ—Ç –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è—Ç—å –º–æ–¥—É–ª–∏ —Å–ª–æ—è)
// 4. project-module-2 (–º–æ–∂–µ—Ç –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è—Ç—å –º–æ–¥—É–ª–∏ —Å–ª–æ—è)
```

–ï—Å–ª–∏ –ø–æ—Ä—è–¥–æ–∫ –º–æ–¥—É–ª–µ–π –º–µ—à–∞–µ—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ —Ö—É–∫–∞, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ö—É–∫ [`modules:done`](/docs/4.x/guide/modules/recipes-advanced) ‚Äî –æ–Ω –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ –≤—Å–µ—Ö –º–æ–¥—É–ª–µ–π.

üëâ –ü–æ–¥—Ä–æ–±–Ω–µ–µ: [PR #31507](https://github.com/nuxt/nuxt/pull/31507), [issue #25719](https://github.com/nuxt/nuxt/issues/25719).

### –î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –º–∞—Ä—à—Ä—É—Ç–∞

üö¶ **–£—Ä–æ–≤–µ–Ω—å –≤–ª–∏—è–Ω–∏—è**: –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π

#### –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

–ß–∞—Å—Ç—å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –º–∞—Ä—à—Ä—É—Ç–∞ –∑–∞–¥–∞—ë—Ç—Å—è —á–µ—Ä–µ–∑ `definePageMeta` (`name`, `path` –∏ —Ç.–¥.). –†–∞–Ω—å—à–µ –æ–Ω–∏ –±—ã–ª–∏ –¥–æ—Å—Ç—É–ø–Ω—ã –∏ –≤ –æ–±—ä–µ–∫—Ç–µ –º–∞—Ä—à—Ä—É—Ç–∞, –∏ –≤ `route.meta` (–Ω–∞–ø—Ä–∏–º–µ—Ä `route.name` –∏ `route.meta.name`).

–¢–µ–ø–µ—Ä—å –¥–æ—Å—Ç—É–ø —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ –æ–±—ä–µ–∫—Ç –º–∞—Ä—à—Ä—É—Ç–∞.

#### –ü—Ä–∏—á–∏–Ω—ã –∏–∑–º–µ–Ω–µ–Ω–∏–π

–°–ª–µ–¥—Å—Ç–≤–∏–µ –≤–∫–ª—é—á–µ–Ω–∏—è `experimental.scanPageMeta` –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.

#### –®–∞–≥–∏ –º–∏–≥—Ä–∞—Ü–∏–∏

–û–±—ã—á–Ω–æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∑–∞–º–µ–Ω–∏—Ç—å –æ–±—Ä–∞—â–µ–Ω–∏–µ:

```diff
  const route = useRoute()
  
- console.log(route.meta.name)
+ console.log(route.name)
```

### –ù–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∏–º–µ–Ω–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

üö¶ **–£—Ä–æ–≤–µ–Ω—å –≤–ª–∏—è–Ω–∏—è**: —Å—Ä–µ–¥–Ω–∏–π

Vue —Ç–µ–ø–µ—Ä—å –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∏–º–µ–Ω–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –ø–æ –ø—Ä–∞–≤–∏–ª–∞–º Nuxt.

#### –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é (–µ—Å–ª–∏ –∏–º—è –Ω–µ –∑–∞–¥–∞–Ω–æ –≤—Ä—É—á–Ω—É—é) Vue –ø—Ä–∏—Å–≤–∞–∏–≤–∞–µ—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—É –∏–º—è –ø–æ –∏–º–µ–Ω–∏ —Ñ–∞–π–ª–∞.

```bash [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–∞—Ç–∞–ª–æ–≥–æ–≤]
‚îú‚îÄ components/
‚îú‚îÄ‚îÄ‚îÄ SomeFolder/
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ MyComponent.vue
```

–î–ª—è Vue –∏–º—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ ‚Äî `MyComponent` (–¥–ª—è `<KeepAlive>` –∏ Vue DevTools). –î–ª—è –∞–≤—Ç–æ–∏–º–ø–æ—Ä—Ç–∞ —Ä–∞–Ω—å—à–µ –Ω—É–∂–Ω–æ –±—ã–ª–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `SomeFolderMyComponent`.

–¢–µ–ø–µ—Ä—å –æ–±–∞ –≤–∞—Ä–∏–∞–Ω—Ç–∞ —Å–æ–≤–ø–∞–¥–∞—é—Ç: Vue –≤—ã–¥–∞—ë—Ç –∏–º—è –ø–æ –ø—Ä–∞–≤–∏–ª–∞–º Nuxt.

#### –®–∞–≥–∏ –º–∏–≥—Ä–∞—Ü–∏–∏

–í —Ç–µ—Å—Ç–∞—Ö —Å `findComponent` –∏–∑ `@vue/test-utils` –∏ –≤ `<KeepAlive>` –ø–æ –∏–º–µ–Ω–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ–±–Ω–æ–≤–ª—ë–Ω–Ω–æ–µ –∏–º—è.

–í—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å —ç—Ç–æ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –º–æ–∂–Ω–æ —Ç–∞–∫:

```ts twoslash [nuxt.config.ts]
export default defineNuxtConfig({
  experimental: {
    normalizeComponentNames: false,
  },
})
```

### Unhead v2

üö¶ **–£—Ä–æ–≤–µ–Ω—å –≤–ª–∏—è–Ω–∏—è**: –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π

#### –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

[Unhead](https://unhead.unjs.io/), –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –¥–ª—è —Ç–µ–≥–æ–≤ `<head>`, –æ–±–Ω–æ–≤–ª—ë–Ω –¥–æ v2. –í —Ü–µ–ª–æ–º —Å–æ–≤–º–µ—Å—Ç–∏–º, –Ω–æ –µ—Å—Ç—å breaking changes –≤ –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤–æ–º API.

- –£–¥–∞–ª–µ–Ω—ã –ø—Ä–æ–ø—Å—ã: `vmid`, `hid`, `children`, `body`.
- –í–≤–æ–¥ –≤ –≤–∏–¥–µ Promise –±–æ–ª—å—à–µ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è.
- –¢–µ–≥–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Å–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è —á–µ—Ä–µ–∑ Capo.js.

#### –®–∞–≥–∏ –º–∏–≥—Ä–∞—Ü–∏–∏

–ù–∞ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π —ç—Ç–æ –ø–æ—á—Ç–∏ –Ω–µ –ø–æ–≤–ª–∏—è–µ—Ç.

–ü—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

- –ù–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ª–∏ —É–¥–∞–ª—ë–Ω–Ω—ã–µ –ø—Ä–æ–ø—Å—ã.

```diff
useHead({
  meta: [{ 
    name: 'description', 
    // meta tags don't need a vmid, or a key    
-   vmid: 'description' 
-   hid: 'description'
  }]
})
```

- –ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ [Template Params](https://unhead.unjs.io/docs/head/guides/plugins/template-params) –∏–ª–∏ [Alias Tag Sorting](https://unhead.unjs.io/docs/head/guides/plugins/alias-sorting) —ç—Ç–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –Ω—É–∂–Ω–æ —è–≤–Ω–æ –ø–æ–¥–∫–ª—é—á–∏—Ç—å.

```ts
import { AliasSortingPlugin, TemplateParamsPlugin } from '@unhead/vue/plugins'

export default defineNuxtPlugin({
  setup () {
    const unhead = injectHead()
    unhead.use(TemplateParamsPlugin)
    unhead.use(AliasSortingPlugin)
  },
})
```

–ù–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ, –Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∑–∞–º–µ–Ω–∏—Ç—å –∏–º–ø–æ—Ä—Ç—ã –∏–∑ `@unhead/vue` –Ω–∞ `#imports` –∏–ª–∏ `nuxt/app`.

```diff
-import { useHead } from '@unhead/vue'
+import { useHead } from '#imports'
```

–ü—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö –º–æ–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å –ø–æ–≤–µ–¥–µ–Ω–∏–µ v1, –≤–∫–ª—é—á–∏–≤ –æ–ø—Ü–∏—é `head.legacy`.

```ts
export default defineNuxtConfig({
  unhead: {
    legacy: true,
  },
})
```

### –ù–æ–≤–æ–µ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ —ç–∫—Ä–∞–Ω–∞ –∑–∞–≥—Ä—É–∑–∫–∏ SPA –≤ DOM

üö¶ **–£—Ä–æ–≤–µ–Ω—å –≤–ª–∏—è–Ω–∏—è**: –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π

#### –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

–ü—Ä–∏ —Ä–µ–Ω–¥–µ—Ä–µ –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã (`ssr: false`) —ç–∫—Ä–∞–Ω –∑–∞–≥—Ä—É–∑–∫–∏ (–∏–∑ `~/app/spa-loading-template.html`; –≤ Nuxt 4 –ø—É—Ç—å ‚Äî `~/spa-loading-template.html`) —Ä–∞–Ω—å—à–µ —Ä–µ–Ω–¥–µ—Ä–∏–ª—Å—è –≤–Ω—É—Ç—Ä–∏ –∫–æ—Ä–Ω—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è Nuxt:

```html
<div id="__nuxt">
  <!-- —à–∞–±–ª–æ–Ω –∑–∞–≥—Ä—É–∑–∫–∏ SPA -->
</div>
```

–¢–µ–ø–µ—Ä—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —à–∞–±–ª–æ–Ω —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è —Ä—è–¥–æ–º —Å –∫–æ—Ä–Ω–µ–º:

```html
<div id="__nuxt"></div>
<!-- —à–∞–±–ª–æ–Ω –∑–∞–≥—Ä—É–∑–∫–∏ SPA -->
```

#### –ü—Ä–∏—á–∏–Ω—ã –∏–∑–º–µ–Ω–µ–Ω–∏–π

–®–∞–±–ª–æ–Ω –∑–∞–≥—Ä—É–∑–∫–∏ –æ—Å—Ç–∞—ë—Ç—Å—è –≤ DOM –¥–æ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è suspense –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è Vue, —á—Ç–æ —É–±–∏—Ä–∞–µ—Ç –±–µ–ª—É—é –≤—Å–ø—ã—à–∫—É.

#### –®–∞–≥–∏ –º–∏–≥—Ä–∞—Ü–∏–∏

–ï—Å–ª–∏ –≤—ã –æ–±—Ä–∞—â–∞–ª–∏—Å—å –∫ —à–∞–±–ª–æ–Ω—É –∑–∞–≥—Ä—É–∑–∫–∏ —á–µ—Ä–µ–∑ CSS –∏–ª–∏ `document.querySelector`, –æ–±–Ω–æ–≤–∏—Ç–µ —Å–µ–ª–µ–∫—Ç–æ—Ä—ã. –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–æ–≤—ã–µ –æ–ø—Ü–∏–∏ `app.spaLoaderTag` –∏ `app.spaLoaderAttrs`.

–í–µ—Ä–Ω—É—Ç—å –ø—Ä–µ–∂–Ω–µ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –º–æ–∂–Ω–æ —Ç–∞–∫:

```ts twoslash [nuxt.config.ts]
export default defineNuxtConfig({
  experimental: {
    spaLoadingTemplateLocation: 'within',
  },
})
```

### –ü–∞—Ä—Å–∏–Ω–≥ `error.data`

üö¶ **–£—Ä–æ–≤–µ–Ω—å –≤–ª–∏—è–Ω–∏—è**: –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π

–†–∞–Ω—å—à–µ –ø—Ä–∏ –≤—ã–±—Ä–æ—Å–µ –æ—à–∏–±–∫–∏ —Å –ø–æ–ª–µ–º `data` –æ–Ω–æ –Ω–µ –ø–∞—Ä—Å–∏–ª–æ—Å—å. –¢–µ–ø–µ—Ä—å –æ–Ω–æ –ø–∞—Ä—Å–∏—Ä—É–µ—Ç—Å—è –∏ –¥–æ—Å—Ç—É–ø–Ω–æ –≤ –æ–±—ä–µ–∫—Ç–µ `error`. –≠—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ, –Ω–æ breaking change –¥–ª—è –∫–æ–¥–∞, –∫–æ—Ç–æ—Ä—ã–π –ø–∞—Ä—Å–∏–ª `error.data` –≤—Ä—É—á–Ω—É—é.

#### –®–∞–≥–∏ –º–∏–≥—Ä–∞—Ü–∏–∏

–í –∫–∞—Å—Ç–æ–º–Ω–æ–º `error.vue` —É–±–µ—Ä–∏—Ç–µ —Ä—É—á–Ω–æ–π –ø–∞—Ä—Å–∏–Ω–≥ `error.data`:

```diff
  <script setup lang="ts">
  import type { NuxtError } from '#app'

  const props = defineProps({
    error: Object as () => NuxtError
  })

- const data = JSON.parse(error.data)
+ const data = error.data
  </script>
```

### –ë–æ–ª–µ–µ —Ç–æ—á–µ—á–Ω–∞—è –∏–Ω–ª–∞–π–Ω–∏–∑–∞—Ü–∏—è —Å—Ç–∏–ª–µ–π

üö¶ **–£—Ä–æ–≤–µ–Ω—å –≤–ª–∏—è–Ω–∏—è**: —Å—Ä–µ–¥–Ω–∏–π

Nuxt —Ç–µ–ø–µ—Ä—å –∏–Ω–ª–∞–π–Ω–∏—Ç —Ç–æ–ª—å–∫–æ —Å—Ç–∏–ª–∏ Vue-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤, –Ω–µ –≥–ª–æ–±–∞–ª—å–Ω—ã–π CSS.

#### –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

–†–∞–Ω—å—à–µ Nuxt –∏–Ω–ª–∞–π–Ω–∏–ª –≤–µ—Å—å CSS, –≤–∫–ª—é—á–∞—è –≥–ª–æ–±–∞–ª—å–Ω—ã–π, –∏ —É–±–∏—Ä–∞–ª `<link>` –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã. –¢–µ–ø–µ—Ä—å –∏–Ω–ª–∞–π–Ω—è—Ç—Å—è —Ç–æ–ª—å–∫–æ —Å—Ç–∏–ª–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ (—Ä–∞–Ω–µ–µ –∏–∑ –Ω–∏—Ö –ø–æ–ª—É—á–∞–ª–∏—Å—å –æ—Ç–¥–µ–ª—å–Ω—ã–µ —á–∞–Ω–∫–∏). –≠—Ç–æ –¥–∞—ë—Ç –∏ –º–µ–Ω—å—à–µ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –ø—Ä–∏ –ø–µ—Ä–≤–æ–π –∑–∞–≥—Ä—É–∑–∫–µ, –∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–¥–Ω–æ–≥–æ –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ CSS, –∏ –º–µ–Ω—å—à–∏–π —Ä–∞–∑–º–µ—Ä –¥–æ–∫—É–º–µ–Ω—Ç–∞.

#### –®–∞–≥–∏ –º–∏–≥—Ä–∞—Ü–∏–∏

–ü–æ–≤–µ–¥–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è: –≤–µ—Ä–Ω—É—Ç—å –∏–Ω–ª–∞–π–Ω –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ CSS –º–æ–∂–Ω–æ –æ–ø—Ü–∏–µ–π `inlineStyles: true`.

```ts twoslash [nuxt.config.ts]
export default defineNuxtConfig({
  features: {
    inlineStyles: true,
  },
})
```

### –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü –ø–æ—Å–ª–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è

üö¶ **–£—Ä–æ–≤–µ–Ω—å –≤–ª–∏—è–Ω–∏—è**: –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π

#### –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

–ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü (–∏–∑ `definePageMeta`) —Ç–µ–ø–µ—Ä—å —Å–∫–∞–Ω–∏—Ä—É—é—Ç—Å—è _–ø–æ—Å–ª–µ_ —Ö—É–∫–∞ `pages:extend`, –∞ –Ω–µ –¥–æ –Ω–µ–≥–æ.

#### –ü—Ä–∏—á–∏–Ω—ã –∏–∑–º–µ–Ω–µ–Ω–∏–π

–¢–∞–∫ —É—á–∏—Ç—ã–≤–∞—é—Ç—Å—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã, –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ –≤ `pages:extend`. –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è—Ç—å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –º–æ–∂–Ω–æ –≤ –Ω–æ–≤–æ–º —Ö—É–∫–µ `pages:resolved`.

#### –®–∞–≥–∏ –º–∏–≥—Ä–∞—Ü–∏–∏

–ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü –ø–µ—Ä–µ–Ω–µ—Å–∏—Ç–µ –∏–∑ `pages:extend` –≤ `pages:resolved`.

```diff
  export default defineNuxtConfig({
    hooks: {
-     'pages:extend'(pages) {
+     'pages:resolved'(pages) {
        const myPage = pages.find(page => page.path === '/')
        myPage.meta ||= {}
        myPage.meta.layout = 'overridden-layout'
      }
    }
  })
```

–í–µ—Ä–Ω—É—Ç—å –ø—Ä–µ–∂–Ω–µ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –º–æ–∂–Ω–æ —Ç–∞–∫:

```ts twoslash [nuxt.config.ts]
export default defineNuxtConfig({
  experimental: {
    scanPageMeta: true,
  },
})
```

### –û–±—â–∏–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ –ø—Ä–µ—Ä–µ–Ω–¥–µ—Ä–µ

üö¶ **–£—Ä–æ–≤–µ–Ω—å –≤–ª–∏—è–Ω–∏—è**: —Å—Ä–µ–¥–Ω–∏–π

#### –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

–í–∫–ª—é—á–µ–Ω–∞ —Ä–∞–Ω–µ–µ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω–∞—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –¥–µ–ª–∏—Ç—å—Å—è –¥–∞–Ω–Ω—ã–º–∏ –∏–∑ `useAsyncData` –∏ `useFetch` –º–µ–∂–¥—É —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º–∏. –°–º. [–∏—Å—Ö–æ–¥–Ω—ã–π PR](https://github.com/nuxt/nuxt/pull/24894).

#### –ü—Ä–∏—á–∏–Ω—ã –∏–∑–º–µ–Ω–µ–Ω–∏–π

–î–∞–Ω–Ω—ã–µ payload –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –º–µ–∂–¥—É –ø—Ä–µ—Ä–µ–Ω–¥–µ—Ä–µ–Ω–Ω—ã–º–∏ —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º–∏. –≠—Ç–æ —É—Å–∫–æ—Ä—è–µ—Ç –ø—Ä–µ—Ä–µ–Ω–¥–µ—Ä —Å–∞–π—Ç–æ–≤, –≥–¥–µ –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö –∑–∞–ø—Ä–∞—à–∏–≤–∞—é—Ç—Å—è –æ–¥–Ω–∏ –∏ —Ç–µ –∂–µ –¥–∞–Ω–Ω—ã–µ.

–ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –Ω–∞ –∫–∞–∂–¥–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `useFetch` (–º–µ–Ω—é, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑ CMS), –ø—Ä–∏ –ø—Ä–µ—Ä–µ–Ω–¥–µ—Ä–µ –¥–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—è—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑ –∏ –∑–∞–∫—ç—à–∏—Ä—É—é—Ç—Å—è –¥–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü.

#### –®–∞–≥–∏ –º–∏–≥—Ä–∞—Ü–∏–∏

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∫–∞–∂–¥—ã–π —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∫–ª—é—á –¥–∞–Ω–Ω—ã—Ö –≤—Å–µ–≥–¥–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –æ–¥–Ω–∏–º –∏ —Ç–µ–º –∂–µ –¥–∞–Ω–Ω—ã–º. –î–ª—è –¥–∞–Ω–Ω—ã—Ö, –ø—Ä–∏–≤—è–∑–∞–Ω–Ω—ã—Ö –∫ —Å—Ç—Ä–∞–Ω–∏—Ü–µ, –∑–∞–¥–∞–≤–∞–π—Ç–µ –∫–ª—é—á, –æ–¥–Ω–æ–∑–Ω–∞—á–Ω–æ –∏–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä—É—é—â–∏–π —ç—Ç–∏ –¥–∞–Ω–Ω—ã–µ. (`useFetch` –¥–µ–ª–∞–µ—Ç —ç—Ç–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.)

```ts [app/pages/test/[slug\\].vue]
// –¢–∞–∫ –¥–µ–ª–∞—Ç—å –Ω–µ–±–µ–∑–æ–ø–∞—Å–Ω–æ –Ω–∞ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ: slug –≤–ª–∏—è–µ—Ç –Ω–∞ –¥–∞–Ω–Ω—ã–µ,
// –Ω–æ Nuxt —ç—Ç–æ–≥–æ –Ω–µ –≤–∏–¥–∏—Ç, –µ—Å–ª–∏ –∫–ª—é—á –Ω–µ –æ—Ç—Ä–∞–∂–∞–µ—Ç slug.
const route = useRoute()
const { data } = await useAsyncData(async () => {
  return await $fetch(`/api/my-page/${route.params.slug}`)
})
// –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–ª—é—á, –æ–¥–Ω–æ–∑–Ω–∞—á–Ω–æ –∏–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä—É—é—â–∏–π –∑–∞–≥—Ä—É–∂–∞–µ–º—ã–µ –¥–∞–Ω–Ω—ã–µ.
const { data } = await useAsyncData(route.params.slug, async () => {
  return await $fetch(`/api/my-page/${route.params.slug}`)
})
```

–û—Ç–∫–ª—é—á–∏—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –º–æ–∂–Ω–æ —Ç–∞–∫:

```ts twoslash [nuxt.config.ts]
export default defineNuxtConfig({
  experimental: {
    sharedPrerenderData: false,
  },
})
```

### –ó–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è `data` –∏ `error` –≤ `useAsyncData` –∏ `useFetch`

üö¶ **–£—Ä–æ–≤–µ–Ω—å –≤–ª–∏—è–Ω–∏—è**: –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π

#### –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

–û–±—ä–µ–∫—Ç—ã `data` –∏ `error`, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–µ `useAsyncData`, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Ç–µ–ø–µ—Ä—å `undefined`.

#### –ü—Ä–∏—á–∏–Ω—ã –∏–∑–º–µ–Ω–µ–Ω–∏–π

–†–∞–Ω—å—à–µ `data` –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–ª—Å—è –∫–∞–∫ `null`, –∞ –≤ `clearNuxtData` —Å–±—Ä–∞—Å—ã–≤–∞–ª—Å—è –≤ `undefined`; `error` –±—ã–ª `null`. –ò–∑–º–µ–Ω–µ–Ω–∏–µ –¥–ª—è –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–∏—è.

#### –®–∞–≥–∏ –º–∏–≥—Ä–∞—Ü–∏–∏

–ü—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ `data.value === null` –∏–ª–∏ `error.value === null` –∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫—É `undefined`.

::tip
–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å: `npx codemod@latest nuxt/4/default-data-error-value`
::

### –£–¥–∞–ª–µ–Ω–∏–µ —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö boolean-–∑–Ω–∞—á–µ–Ω–∏–π –æ–ø—Ü–∏–∏ `dedupe` –ø—Ä–∏ –≤—ã–∑–æ–≤–µ `refresh` –≤ `useAsyncData` –∏ `useFetch`

üö¶ **–£—Ä–æ–≤–µ–Ω—å –≤–ª–∏—è–Ω–∏—è**: –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π

#### –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

–†–∞–Ω—å—à–µ –≤ `refresh` –º–æ–∂–Ω–æ –±—ã–ª–æ –ø–µ—Ä–µ–¥–∞—Ç—å `dedupe: boolean` ‚Äî —ç—Ç–æ –±—ã–ª–∏ –∞–ª–∏–∞—Å—ã `cancel` (`true`) –∏ `defer` (`false`).

```ts twoslash [app/app.vue]
// @errors: 2322
const { refresh } = await useAsyncData(() => Promise.resolve({ message: 'Hello, Nuxt!' }))

async function refreshData () {
  await refresh({ dedupe: true })
}
```

#### –ü—Ä–∏—á–∏–Ω—ã –∏–∑–º–µ–Ω–µ–Ω–∏–π

–ê–ª–∏–∞—Å—ã —É–±—Ä–∞–Ω—ã –¥–ª—è —è—Å–Ω–æ—Å—Ç–∏: –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ `dedupe` –≤ –æ–ø—Ü–∏–∏ `useAsyncData` boolean-–∑–Ω–∞—á–µ–Ω–∏—è –æ–∫–∞–∑–∞–ª–∏—Å—å –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω—ã–º–∏ –ø–æ —Å–º—ã—Å–ª—É.

`refresh({ dedupe: false })` –æ–∑–Ω–∞—á–∞–ª–æ ¬´–Ω–µ –æ—Ç–º–µ–Ω—è—Ç—å —Ç–µ–∫—É—â–∏–µ –∑–∞–ø—Ä–æ—Å—ã –≤ –ø–æ–ª—å–∑—É –Ω–æ–≤–æ–≥–æ¬ª, –∞ `dedupe: true` –≤ –æ–ø—Ü–∏—è—Ö `useAsyncData` ‚Äî ¬´–Ω–µ –¥–µ–ª–∞—Ç—å –Ω–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å, –µ—Å–ª–∏ —É–∂–µ –µ—Å—Ç—å –æ–∂–∏–¥–∞—é—â–∏–π¬ª. –°–º. [PR](https://github.com/nuxt/nuxt/pull/24564#pullrequestreview-1764584361).

#### –®–∞–≥–∏ –º–∏–≥—Ä–∞—Ü–∏–∏

–î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∑–∞–º–µ–Ω–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è:

```diff
  const { refresh } = await useAsyncData(async () => ({ message: 'Hello, Nuxt 3!' }))
  
  async function refreshData () {
-   await refresh({ dedupe: true })
+   await refresh({ dedupe: 'cancel' })

-   await refresh({ dedupe: false })
+   await refresh({ dedupe: 'defer' })
  }
```

::tip
–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å: `npx codemod@latest nuxt/4/deprecated-dedupe-value`
::

### –£—á—ë—Ç –∑–Ω–∞—á–µ–Ω–∏–π –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø—Ä–∏ –æ—á–∏—Å—Ç–∫–µ `data` –≤ `useAsyncData` –∏ `useFetch`

üö¶ **–£—Ä–æ–≤–µ–Ω—å –≤–ª–∏—è–Ω–∏—è**: –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π

#### –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

–ü—Ä–∏ –∑–∞–¥–∞–Ω–Ω–æ–º –∫–∞—Å—Ç–æ–º–Ω–æ–º `default` –≤ `useAsyncData` –ø—Ä–∏ –≤—ã–∑–æ–≤–µ `clear` –∏–ª–∏ `clearNuxtData` –¥–∞–Ω–Ω—ã–µ —Å–±—Ä–∞—Å—ã–≤–∞—é—Ç—Å—è –≤ —ç—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, –∞ –Ω–µ –ø—Ä–æ—Å—Ç–æ –≤ ¬´–Ω–µ –∑–∞–¥–∞–Ω–æ¬ª.

#### –ü—Ä–∏—á–∏–Ω—ã –∏–∑–º–µ–Ω–µ–Ω–∏–π

–ß–∞—Å—Ç–æ –∑–∞–¥–∞—é—Ç –ø—É—Å—Ç–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤), —á—Ç–æ–±—ã –Ω–µ –ø—Ä–æ–≤–µ—Ä—è—Ç—å `null`/`undefined` –ø—Ä–∏ –∏—Ç–µ—Ä–∞—Ü–∏–∏. –ü—Ä–∏ —Å–±—Ä–æ—Å–µ/–æ—á–∏—Å—Ç–∫–µ —ç—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å—Å—è.

### –°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è `pending` –≤ `useAsyncData` –∏ `useFetch`

üö¶ **–£—Ä–æ–≤–µ–Ω—å –≤–ª–∏—è–Ω–∏—è**: —Å—Ä–µ–¥–Ω–∏–π

`pending`, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–π `useAsyncData`, `useFetch`, `useLazyAsyncData` –∏ `useLazyFetch`, —Ç–µ–ø–µ—Ä—å computed: `true` —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ `status` —Ç–æ–∂–µ pending.

#### –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

–ü—Ä–∏ `immediate: false` —Ç–µ–ø–µ—Ä—å `pending` –±—É–¥–µ—Ç `false`, –ø–æ–∫–∞ –Ω–µ –≤—ã–ø–æ–ª–Ω–µ–Ω –ø–µ—Ä–≤—ã–π –∑–∞–ø—Ä–æ—Å. –†–∞–Ω—å—à–µ –¥–æ –ø–µ—Ä–≤–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ `pending` –±—ã–ª –≤—Å–µ–≥–¥–∞ `true`.

#### –ü—Ä–∏—á–∏–Ω—ã –∏–∑–º–µ–Ω–µ–Ω–∏–π

–°–º—ã—Å–ª `pending` –ø—Ä–∏–≤–µ–¥—ë–Ω –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å–æ —Å–≤–æ–π—Å—Ç–≤–æ–º `status`, –∫–æ—Ç–æ—Ä–æ–µ —Ç–æ–∂–µ –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ pending –≤–æ –≤—Ä–µ–º—è –∑–∞–ø—Ä–æ—Å–∞.

#### –®–∞–≥–∏ –º–∏–≥—Ä–∞—Ü–∏–∏

–ï—Å–ª–∏ –≤—ã –æ–ø–∏—Ä–∞–µ—Ç–µ—Å—å –Ω–∞ `pending`, —É—á—Ç–∏—Ç–µ: —Ç–µ–ø–µ—Ä—å –æ–Ω `true` —Ç–æ–ª—å–∫–æ –ø—Ä–∏ `status === 'pending'`.

```diff
  <template>
-   <div v-if="!pending">
+   <div v-if="status === 'success'">
      <p>Data: {{ data }}</p>
    </div>
    <div v-else>
      <p>Loading...</p>
    </div>
  </template>
  <script setup lang="ts">
  const { data, pending, execute, status } = await useAsyncData(() => fetch('/api/data'), {
    immediate: false
  })
  onMounted(() => execute())
  </script>
```

–í—Ä–µ–º–µ–Ω–Ω–æ –≤–µ—Ä–Ω—É—Ç—å –ø—Ä–µ–∂–Ω–µ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –º–æ–∂–Ω–æ —Ç–∞–∫:

```ts twoslash [nuxt.config.ts]
export default defineNuxtConfig({
  experimental: {
    pendingWhenIdle: true,
  },
})
```

### Key Change Behavior in `useAsyncData` and `useFetch`

üö¶ **–£—Ä–æ–≤–µ–Ω—å –≤–ª–∏—è–Ω–∏—è**: —Å—Ä–µ–¥–Ω–∏–π

#### –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

–ü—Ä–∏ —Ä–µ–∞–∫—Ç–∏–≤–Ω—ã—Ö –∫–ª—é—á–∞—Ö –≤ `useAsyncData` –∏–ª–∏ `useFetch` Nuxt –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ —Å–º–µ–Ω–µ –∫–ª—é—á–∞. –ü—Ä–∏ `immediate: false` –¥–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–∞—à–∏–≤–∞—é—Ç—Å—è –ø—Ä–∏ —Å–º–µ–Ω–µ –∫–ª—é—á–∞ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –æ–Ω–∏ —É–∂–µ –±—ã–ª–∏ –∑–∞–ø—Ä–æ—à–µ–Ω—ã —Ö–æ—Ç—è –±—ã —Ä–∞–∑.

–†–∞–Ω—å—à–µ `useFetch` –≤—ë–ª —Å–µ–±—è –∏–Ω–∞—á–µ: –≤—Å–µ–≥–¥–∞ –∑–∞–ø—Ä–∞—à–∏–≤–∞–ª –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ —Å–º–µ–Ω–µ –∫–ª—é—á–∞.

–¢–µ–ø–µ—Ä—å `useFetch` –∏ `useAsyncData` –≤–µ–¥—É—Ç —Å–µ–±—è –æ–¥–∏–Ω–∞–∫–æ–≤–æ: –ø—Ä–∏ —Å–º–µ–Ω–µ –∫–ª—é—á–∞ –¥–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–∞—à–∏–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –æ–Ω–∏ —É–∂–µ –±—ã–ª–∏ –ø–æ–ª—É—á–µ–Ω—ã —Ä–∞–Ω–µ–µ.

#### –ü—Ä–∏—á–∏–Ω—ã –∏–∑–º–µ–Ω–µ–Ω–∏–π

–ï–¥–∏–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤. –ü—Ä–∏ `immediate: false` –Ω—É–∂–Ω–æ –≤—ã–∑—ã–≤–∞—Ç—å `refresh` –∏–ª–∏ `execute`, –∏–Ω–∞—á–µ –¥–∞–Ω–Ω—ã–µ –≤ `useFetch`/`useAsyncData` –Ω–µ –±—É–¥—É—Ç –∑–∞–ø—Ä–æ—à–µ–Ω—ã.

#### –®–∞–≥–∏ –º–∏–≥—Ä–∞—Ü–∏–∏

–û–±—ã—á–Ω–æ –ø–æ–≤–µ–¥–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ —É–ª—É—á—à–∞–µ—Ç—Å—è. –ï—Å–ª–∏ –≤—ã –ø–æ–ª–∞–≥–∞–ª–∏—Å—å –Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—Ä–æ—Å –ø—Ä–∏ —Å–º–µ–Ω–µ –∫–ª—é—á–∞/–æ–ø—Ü–∏–π —É –Ω–µ-immediate `useFetch`, –ø–µ—Ä–≤—ã–π –∑–∞–ø—Ä–æ—Å —Ç–µ–ø–µ—Ä—å –Ω—É–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –≤—Ä—É—á–Ω—É—é.

```diff
  const id = ref('123')
  const { data, execute } = await useFetch('/api/test', {
    query: { id },
    immediate: false
  )
+ watch(id, () => execute(), { once: true })
```

–û—Ç–∫–ª—é—á–∏—Ç—å —ç—Ç–æ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:

```ts
// –ò–ª–∏ –≥–ª–æ–±–∞–ª—å–Ω–æ –≤ nuxt.config
export default defineNuxtConfig({
  experimental: {
    alwaysRunFetchOnKeyChange: true,
  },
})
```

### Shallow Data Reactivity in `useAsyncData` and `useFetch`

üö¶ **–£—Ä–æ–≤–µ–Ω—å –≤–ª–∏—è–Ω–∏—è**: –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π

`data`, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–π `useAsyncData`, `useFetch`, `useLazyAsyncData` –∏ `useLazyFetch`, —Ç–µ–ø–µ—Ä—å `shallowRef`, –∞ –Ω–µ `ref`.

#### –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

–ü—Ä–∏ –Ω–æ–≤–æ–º –∑–∞–ø—Ä–æ—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç `data` –æ—Å—Ç–∞—é—Ç—Å—è —Ä–µ–∞–∫—Ç–∏–≤–Ω—ã–º–∏ ‚Äî –æ–±—ä–µ–∫—Ç –∑–∞–º–µ–Ω—è–µ—Ç—Å—è —Ü–µ–ª–∏–∫–æ–º. –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å–≤–æ–π—Å—Ç–≤ _–≤–Ω—É—Ç—Ä–∏_ —ç—Ç–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞ –Ω–µ –≤—ã–∑–æ–≤–µ—Ç —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏.

#### –ü—Ä–∏—á–∏–Ω—ã –∏–∑–º–µ–Ω–µ–Ω–∏–π

–°—É—â–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –ø—Ä–∏—Ä–æ—Å—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –¥–ª—è –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ –∏ –º–∞—Å—Å–∏–≤–æ–≤: Vue –Ω–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –∫–∞–∂–¥–æ–µ —Å–≤–æ–π—Å—Ç–≤–æ. –í –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ —Å–ª—É—á–∞–µ–≤ `data` –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–µ–∏–∑–º–µ–Ω—è–µ–º—ã–º.

#### –®–∞–≥–∏ –º–∏–≥—Ä–∞—Ü–∏–∏

–û–±—ã—á–Ω–æ –º–∏–≥—Ä–∞—Ü–∏—è –Ω–µ –Ω—É–∂–Ω–∞. –ï—Å–ª–∏ –≤—ã –ø–æ–ª–∞–≥–∞–µ—Ç–µ—Å—å –Ω–∞ –≥–ª—É–±–æ–∫—É—é —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å `data`, –µ—Å—Ç—å –¥–≤–∞ –≤–∞—Ä–∏–∞–Ω—Ç–∞:

1. –í–∫–ª—é—á–∏—Ç—å –≥–ª—É–±–æ–∫—É—é —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Ç–æ—á–µ—á–Ω–æ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–æ–º–ø–æ–∑–∞–±–ª–∞:
   ```diff
   - const { data } = useFetch('/api/test')
   + const { data } = useFetch('/api/test', { deep: true })
   ```
2. –ó–∞–¥–∞—Ç—å –ø–æ–≤–µ–¥–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è –≤—Å–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ (–Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):
   ```ts twoslash [nuxt.config.ts]
   export default defineNuxtConfig({
     experimental: {
       defaults: {
         useAsyncData: {
           deep: true,
         },
       },
     },
   })
   ```

::tip
–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å: `npx codemod@latest nuxt/4/shallow-function-reactivity`
::

### Absolute Watch Paths in `builder:watch`

üö¶ **–£—Ä–æ–≤–µ–Ω—å –≤–ª–∏—è–Ω–∏—è**: –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π

#### –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

–•—É–∫ Nuxt `builder:watch` —Ç–µ–ø–µ—Ä—å –ø–µ—Ä–µ–¥–∞—ë—Ç –∞–±—Å–æ–ª—é—Ç–Ω—ã–π –ø—É—Ç—å –≤–º–µ—Å—Ç–æ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ–≥–æ –∫ `srcDir`.

#### –ü—Ä–∏—á–∏–Ω—ã –∏–∑–º–µ–Ω–µ–Ω–∏–π

–¢–∞–∫ –º–æ–∂–Ω–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –ø—É—Ç–∏ –≤–Ω–µ `srcDir` –∏ –ª—É—á—à–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å —Å–ª–æ–∏ –∏ —Å–ª–æ–∂–Ω—ã–µ —Å—Ö–µ–º—ã.

#### –®–∞–≥–∏ –º–∏–≥—Ä–∞—Ü–∏–∏

–ü—É–±–ª–∏—á–Ω—ã–µ –º–æ–¥—É–ª–∏ Nuxt, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–µ —ç—Ç–æ—Ç —Ö—É–∫, —É–∂–µ –æ–±–Ω–æ–≤–ª–µ–Ω—ã. –°–º. [issue #25339](https://github.com/nuxt/nuxt/issues/25339).

–ï—Å–ª–∏ –≤—ã –∞–≤—Ç–æ—Ä –º–æ–¥—É–ª—è –∏ —Ö–æ—Ç–∏—Ç–µ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å Nuxt v3 –∏ v4, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–∞–∫–æ–π –∫–æ–¥:

```diff
+ import { relative, resolve } from 'node:fs'
  // ...
  nuxt.hook('builder:watch', async (event, path) => {
+   path = relative(nuxt.options.srcDir, resolve(nuxt.options.srcDir, path))
    // ...
  })
```

::tip
–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å: `npx codemod@latest nuxt/4/absolute-watch-path`
::

### –£–¥–∞–ª–µ–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞ `window.__NUXT__`

#### –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

–ì–ª–æ–±–∞–ª—å–Ω—ã–π –æ–±—ä–µ–∫—Ç `window.__NUXT__` —É–¥–∞–ª—è–µ—Ç—Å—è –ø–æ—Å–ª–µ –≥–∏–¥—Ä–∞—Ü–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

#### –ü—Ä–∏—á–∏–Ω—ã –∏–∑–º–µ–Ω–µ–Ω–∏–π

–≠—Ç–æ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –ø—É—Ç—å –∫ –º—É–ª—å—Ç–∏-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º ([#21635](https://github.com/nuxt/nuxt/issues/21635)) –∏ –µ–¥–∏–Ω–æ–º—É —Å–ø–æ—Å–æ–±—É –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∞–Ω–Ω—ã–º ‚Äî `useNuxtApp()`.

#### –®–∞–≥–∏ –º–∏–≥—Ä–∞—Ü–∏–∏

–î–∞–Ω–Ω—ã–µ –ø–æ-–ø—Ä–µ–∂–Ω–µ–º—É –¥–æ—Å—Ç—É–ø–Ω—ã —á–µ—Ä–µ–∑ `useNuxtApp().payload`:

```diff
- console.log(window.__NUXT__)
+ console.log(useNuxtApp().payload)
```

### –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ index –≤ –∫–∞—Ç–∞–ª–æ–≥–∞—Ö

üö¶ **–£—Ä–æ–≤–µ–Ω—å –≤–ª–∏—è–Ω–∏—è**: —Å—Ä–µ–¥–Ω–∏–π

#### –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

–í–ª–æ–∂–µ–Ω–Ω—ã–µ –ø–∞–ø–∫–∏ –≤ `app/middleware/` —Ç–æ–∂–µ —Å–∫–∞–Ω–∏—Ä—É—é—Ç—Å—è –Ω–∞ –Ω–∞–ª–∏—á–∏–µ `index`-—Ñ–∞–π–ª–æ–≤, –æ–Ω–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É—é—Ç—Å—è –∫–∞–∫ middleware.

#### –ü—Ä–∏—á–∏–Ω—ã –∏–∑–º–µ–Ω–µ–Ω–∏–π

Nuxt –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫–∞–Ω–∏—Ä—É–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–∞–ø–æ–∫, –≤ —Ç–æ–º —á–∏—Å–ª–µ `app/middleware/` –∏ `app/plugins/`. –í `app/plugins/` —É–∂–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–ª–∏—Å—å –≤–ª–æ–∂–µ–Ω–Ω—ã–µ –ø–∞–ø–∫–∏ –ø–æ `index` ‚Äî –ø–æ–≤–µ–¥–µ–Ω–∏–µ –ø—Ä–∏–≤–µ–¥–µ–Ω–æ –∫ –µ–¥–∏–Ω–æ–º—É –≤–∏–¥—É.

#### –®–∞–≥–∏ –º–∏–≥—Ä–∞—Ü–∏–∏

–ú–∏–≥—Ä–∞—Ü–∏—è –æ–±—ã—á–Ω–æ –Ω–µ –Ω—É–∂–Ω–∞. –ß—Ç–æ–±—ã –≤–µ—Ä–Ω—É—Ç—å –ø—Ä–µ–∂–Ω–µ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ, –º–æ–∂–Ω–æ –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å —Ç–∞–∫–∏–µ middleware —Ö—É–∫–æ–º:

```ts
export default defineNuxtConfig({
  hooks: {
    'app:resolve' (app) {
      app.middleware = app.middleware.filter(mw => !/\/index\.[^/]+$/.test(mw.path))
    },
  },
})
```

### –ò–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ —à–∞–±–ª–æ–Ω–æ–≤

üö¶ **–£—Ä–æ–≤–µ–Ω—å –≤–ª–∏—è–Ω–∏—è**: –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π

#### –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

–†–∞–Ω—å—à–µ Nuxt –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª `lodash/template` –¥–ª—è –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ —à–∞–±–ª–æ–Ω–æ–≤ –Ω–∞ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ –≤ —Ñ–æ—Ä–º–∞—Ç–µ `.ejs`.

–£—Ç–∏–ª–∏—Ç—ã (`serialize`, `importName`, `importSources`) –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–æ–¥–∞ –≤ —ç—Ç–∏—Ö —à–∞–±–ª–æ–Ω–∞—Ö —É–¥–∞–ª—è—é—Ç—Å—è.

#### –ü—Ä–∏—á–∏–Ω—ã –∏–∑–º–µ–Ω–µ–Ω–∏–π

–í Nuxt v3 –ø–µ—Ä–µ—à–ª–∏ –Ω–∞ ¬´–≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π¬ª —Å–∏–Ω—Ç–∞–∫—Å–∏—Å —Å —Ñ—É–Ω–∫—Ü–∏–µ–π `getContents()`, –≥–∏–±—á–µ –∏ –±—ã—Å—Ç—Ä–µ–µ.

–£ `lodash/template` –±—ã–ª–∏ —É—è–∑–≤–∏–º–æ—Å—Ç–∏; –¥–ª—è Nuxt —ç—Ç–æ –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ (—Å–±–æ—Ä–∫–∞, –¥–æ–≤–µ—Ä–µ–Ω–Ω—ã–π –∫–æ–¥), –Ω–æ –∞—É–¥–∏—Ç—ã –∏—Ö –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç. –ü–ª—é—Å `lodash` ‚Äî —Ç—è–∂—ë–ª–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å, –±–æ–ª—å—à–∏–Ω—Å—Ç–≤—É –ø—Ä–æ–µ–∫—Ç–æ–≤ –Ω–µ –Ω—É–∂–Ω–∞.

–§—É–Ω–∫—Ü–∏–∏ —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∫–æ–¥–∞ –ª—É—á—à–µ –≤—ã–Ω–µ—Å—Ç–∏ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –ø–∞–∫–µ—Ç—ã, –Ω–∞–ø—Ä–∏–º–µ—Ä [unjs/knitwork](https://github.com/unjs/knitwork), —á—Ç–æ–±—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –Ω–µ —Ç—Ä–µ–±–æ–≤–∞–ª–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è Nuxt.

#### –®–∞–≥–∏ –º–∏–≥—Ä–∞—Ü–∏–∏

–ú–æ–¥—É–ª–∏ –Ω–∞ EJS —É–∂–µ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è —á–µ—Ä–µ–∑ PR. –°–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å —Ç–∞–∫ (—Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏):

- –ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ –∏–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏—é —Å—Ç—Ä–æ–∫ –≤ `getContents()`.
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–≤–æ—é –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫—É, –∫–∞–∫ –≤ https://github.com/nuxt-modules/color-mode/pull/240.
- –ü–æ–¥–∫–ª—é—á–∏—Ç—å `es-toolkit/compat` (–∑–∞–º–µ–Ω–∞ lodash template) –∫–∞–∫ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å _–≤–∞—à–µ–≥–æ_ –ø—Ä–æ–µ–∫—Ç–∞:

```diff
+ import { readFileSync } from 'node:fs'
+ import { template } from 'es-toolkit/compat'
  // ...
  addTemplate({
    fileName: 'appinsights-vue.js'
    options: { /* some options */ },
-   src: resolver.resolve('./runtime/plugin.ejs'),
+   getContents({ options }) {
+     const contents = readFileSync(resolver.resolve('./runtime/plugin.ejs'), 'utf-8')
+     return template(contents)({ options })
+   },
  })
```

–£—Ç–∏–ª–∏—Ç—ã —à–∞–±–ª–æ–Ω–æ–≤ (`serialize`, `importName`, `importSources`) –º–æ–∂–Ω–æ –∑–∞–º–µ–Ω–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—è–º–∏ –∏–∑ `knitwork`:

```ts
import { genDynamicImport, genImport, genSafeVariableName } from 'knitwork'

const serialize = (data: any) => JSON.stringify(data, null, 2).replace(/"\{(.+)\}"(?=,?$)/gm, r => JSON.parse(r).replace(/^\{(.*)\}$/, '$1'))

const importSources = (sources: string | string[], { lazy = false } = {}) => {
  return toArray(sources).map((src) => {
    if (lazy) {
      return `const ${genSafeVariableName(src)} = ${genDynamicImport(src, { comment: `webpackChunkName: ${JSON.stringify(src)}` })}`
    }
    return genImport(src, genSafeVariableName(src))
  }).join('\n')
}

const importName = genSafeVariableName
```

::tip
–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å: `npx codemod@latest nuxt/4/template-compilation-changes`
::

### –ò–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ TypeScript –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

üö¶ **–£—Ä–æ–≤–µ–Ω—å –≤–ª–∏—è–Ω–∏—è**: –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π

#### –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

`compilerOptions.noUncheckedIndexedAccess` —Ç–µ–ø–µ—Ä—å `true` –≤–º–µ—Å—Ç–æ `false`.

#### –ü—Ä–∏—á–∏–Ω—ã –∏–∑–º–µ–Ω–µ–Ω–∏–π

–ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ [–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥–∞ 3.12](https://github.com/nuxt/nuxt/pull/27485): –ø—Ä–∏–≤–µ–¥–µ–Ω–∏–µ –¥–µ—Ñ–æ–ª—Ç–æ–≤ –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å [—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º–∏ TotalTypeScript](https://www.totaltypescript.com/tsconfig-cheat-sheet).

#### –®–∞–≥–∏ –º–∏–≥—Ä–∞—Ü–∏–∏

–í–∞—Ä–∏–∞–Ω—Ç—ã:

1. –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É —Ç–∏–ø–æ–≤ –∏ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ –æ—à–∏–±–∫–∏ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è).

2. –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –≤ `nuxt.config.ts`:

   <!-- @case-police-ignore tsConfig -->

   ```ts
   export default defineNuxtConfig({
     typescript: {
       tsConfig: {
         compilerOptions: {
           noUncheckedIndexedAccess: false,
         },
       },
     },
   })
   ```

### –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ TypeScript

üö¶ **–£—Ä–æ–≤–µ–Ω—å –≤–ª–∏—è–Ω–∏—è**: –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π

#### –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

Nuxt —Ç–µ–ø–µ—Ä—å –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∫–æ–Ω—Ñ–∏–≥–∏ TypeScript –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–≤:

1. **–ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏**:
   - `.nuxt/tsconfig.app.json` ‚Äî –∫–æ–¥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã Vue, composables –∏ —Ç.–¥.)
   - `.nuxt/tsconfig.server.json` ‚Äî —Å–µ—Ä–≤–µ—Ä–Ω—ã–π –∫–æ–¥ (Nitro/server)
   - `.nuxt/tsconfig.node.json` ‚Äî –∫–æ–¥ —Å–±–æ—Ä–∫–∏ (–º–æ–¥—É–ª–∏, `nuxt.config.ts` –∏ —Ç.–¥.)
   - `.nuxt/tsconfig.shared.json` ‚Äî –æ–±—â–∏–π –∫–æ–¥ (—Ç–∏–ø—ã, —É—Ç–∏–ª–∏—Ç—ã)
   - `.nuxt/tsconfig.json` ‚Äî –ø—Ä–µ–∂–Ω–∏–π –∫–æ–Ω—Ñ–∏–≥ –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏

2. **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**: –ø—Ä–æ–µ–∫—Ç—ã, —Ä–∞—Å—à–∏—Ä—è—é—â–∏–µ `.nuxt/tsconfig.json`, —Ä–∞–±–æ—Ç–∞—é—Ç –∫–∞–∫ —Ä–∞–Ω—å—à–µ.

3. **–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ project references**: –º–æ–∂–Ω–æ –≤–∫–ª—é—á–∏—Ç—å –¥–ª—è —É–ª—É—á—à–µ–Ω–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–∏–ø–æ–≤.

4. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É**: —É –∫–∞–∂–¥–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ —Å–≤–æ–∏ compiler options –∏ includes/excludes.

5. **–û–ø—Ü–∏—è `typescript.nodeTsConfig`**: –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ TypeScript –¥–ª—è Node.js –ø—Ä–∏ —Å–±–æ—Ä–∫–µ.

#### –ü—Ä–∏—á–∏–Ω—ã –∏–∑–º–µ–Ω–µ–Ω–∏–π

–ü–ª—é—Å—ã:

1. **–¢–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: —É –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–≤ (app, server, build-time) —Å–≤–æ–∏ –≥–ª–æ–±–∞–ª—ã –∏ API.
2. **–õ—É—á—à–µ –≤ IDE**: —Ç–æ—á–Ω–µ–µ IntelliSense –∏ –æ—à–∏–±–∫–∏ –ø–æ —á–∞—Å—Ç—è–º –∫–æ–¥–æ–≤–æ–π –±–∞–∑—ã.
3. **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ**: —Å–µ—Ä–≤–µ—Ä–Ω—ã–π –∫–æ–¥ –Ω–µ –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–µ API –∏ –Ω–∞–æ–±–æ—Ä–æ—Ç.
4. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: TypeScript —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–µ–µ —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Ä–∞–∑–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–º–∏ –∫–æ–Ω—Ñ–∏–≥–∞–º–∏.

–†–∞–Ω—å—à–µ auto-imports –≤ `nuxt.config.ts` –Ω–µ –ø–æ–º–µ—á–∞–ª–∏—Å—å TypeScript; –∫–æ–Ω—Ç–µ–∫—Å—Ç `server/` –≤ IDE –Ω–µ —Å–æ–≤–ø–∞–¥–∞–ª —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π —Ç–∏–ø–æ–≤.

#### –®–∞–≥–∏ –º–∏–≥—Ä–∞—Ü–∏–∏

**–ú–∏–≥—Ä–∞—Ü–∏—è –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞** ‚Äî —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø—Ä–æ–µ–∫—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π.

–ß—Ç–æ–±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —É–ª—É—á—à–µ–Ω–Ω—É—é –ø—Ä–æ–≤–µ—Ä–∫—É —Ç–∏–ø–æ–≤, –≤–∫–ª—é—á–∏—Ç–µ project references:

1. **–û–±–Ω–æ–≤–∏—Ç–µ –∫–æ—Ä–Ω–µ–≤–æ–π `tsconfig.json`**:

   ::note
   –ï—Å–ª–∏ –≤ `tsconfig.json` –µ—Å—Ç—å `"extends": "./.nuxt/tsconfig.json"`, **—É–¥–∞–ª–∏—Ç–µ** –µ–≥–æ –ø–µ—Ä–µ–¥ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º references. Project references –∏ extends –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º—ã.
   ::

   ```json
   {
     // –£–¥–∞–ª–∏—Ç–µ "extends": "./.nuxt/tsconfig.json", –µ—Å–ª–∏ –µ—Å—Ç—å
     "files": [],
     "references": [
       { "path": "./.nuxt/tsconfig.app.json" },
       { "path": "./.nuxt/tsconfig.server.json" },
       { "path": "./.nuxt/tsconfig.shared.json" },
       { "path": "./.nuxt/tsconfig.node.json" }
     ]
   }
   ```

2. **–£–¥–∞–ª–∏—Ç–µ —Ä—É—á–Ω—ã–µ** `server/tsconfig.json`, –µ—Å–ª–∏ –æ–Ω–∏ —Ä–∞—Å—à–∏—Ä—è–ª–∏ `.nuxt/tsconfig.server.json`.

3. **–û–±–Ω–æ–≤–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–∏–ø–æ–≤** ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ–ª–∞–≥ build –¥–ª—è project references:

   ```diff
   - "typecheck": "nuxt prepare && vue-tsc --noEmit"
   + "typecheck": "nuxt prepare && vue-tsc -b --noEmit"
   ```

4. **–ü–µ—Ä–µ–Ω–µ—Å–∏—Ç–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è —Ç–∏–ø–æ–≤ –≤ –Ω—É–∂–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç**:
   - —Ç–∏–ø—ã –¥–ª—è app ‚Äî –≤ `app/`
   - —Ç–∏–ø—ã –¥–ª—è server ‚Äî –≤ `server/`
   - –æ–±—â–∏–µ —Ç–∏–ø—ã (app –∏ server) ‚Äî –≤ `shared/`

    ::warning
    –†–∞—Å—à–∏—Ä–µ–Ω–∏—è —Ç–∏–ø–æ–≤ –≤–Ω–µ `app/`, `server/` –∏–ª–∏ `shared/` –Ω–µ –±—É–¥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å –Ω–æ–≤—ã–º–∏ project references.
    ::

5. **–ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –æ–ø—Ü–∏–∏ TypeScript**:
   <!-- @case-police-ignore tsConfig -->

   ```ts
   export default defineNuxtConfig({
     typescript: {
       // customize tsconfig.app.json
       tsConfig: {
         // ...
       },
       // customize tsconfig.shared.json
       sharedTsConfig: {
         // ...
       },
       // customize tsconfig.node.json
       nodeTsConfig: {
         // ...
       },
     },
     nitro: {
       typescript: {
         // customize tsconfig.server.json
         tsConfig: {
           // ...
         },
       },
     },
   })
   ```

6. **–û–±–Ω–æ–≤–∏—Ç–µ CI/—Å–±–æ—Ä–æ—á–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã** –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–∏–ø–æ–≤ –ø–æ–¥ –Ω–æ–≤—ã–π –ø–æ–¥—Ö–æ–¥ —Å project references.

–ù–æ–≤–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–∞—ë—Ç –ª—É—á—à—É—é —Ç–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ IntelliSense –ø—Ä–∏ –≤–∫–ª—é—á–µ–Ω–∏–∏, –±–µ–∑ –ø–æ—Ç–µ—Ä–∏ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ –¥–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤.

### –£–¥–∞–ª–µ–Ω–∏–µ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω—ã—Ö –æ–ø—Ü–∏–π

üö¶ **–£—Ä–æ–≤–µ–Ω—å –≤–ª–∏—è–Ω–∏—è**: –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π

#### –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

–í Nuxt 4 —ç—Ç–∏ –æ–ø—Ü–∏–∏ –±–æ–ª—å—à–µ –Ω–µ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è:

- `experimental.treeshakeClientOnly` ‚Äî –≤—Å–µ–≥–¥–∞ `true` (–¥–µ—Ñ–æ–ª—Ç —Å v3.0)
- `experimental.configSchema` ‚Äî –≤—Å–µ–≥–¥–∞ `true` (–¥–µ—Ñ–æ–ª—Ç —Å v3.3)
- `experimental.polyfillVueUseHead` ‚Äî –≤—Å–µ–≥–¥–∞ `false` (–¥–µ—Ñ–æ–ª—Ç —Å v3.4)
- `experimental.respectNoSSRHeader` ‚Äî –≤—Å–µ–≥–¥–∞ `false` (–¥–µ—Ñ–æ–ª—Ç —Å v3.4)
- `vite.devBundler` –Ω–µ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è ‚Äî –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `vite-node`

#### –ü—Ä–∏—á–∏–Ω—ã –∏–∑–º–µ–Ω–µ–Ω–∏–π

–ó–Ω–∞—á–µ–Ω–∏—è –¥–∞–≤–Ω–æ –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω—ã, –ø—Ä–∏—á–∏–Ω –æ—Å—Ç–∞–≤–ª—è—Ç—å –∏—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ–º—ã–º–∏ –Ω–µ—Ç.

#### –®–∞–≥–∏ –º–∏–≥—Ä–∞—Ü–∏–∏

- `polyfillVueUseHead` –º–æ–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –≤ –ø—Ä–æ–µ–∫—Ç–µ —á–µ—Ä–µ–∑ [—ç—Ç–æ—Ç –ø–ª–∞–≥–∏–Ω](https://github.com/nuxt/nuxt/blob/f209158352b09d1986aa320e29ff36353b91c358/packages/nuxt/src/head/runtime/plugins/vueuse-head-polyfill.ts#L10-L11).
- `respectNoSSRHeader` ‚Äî —á–µ—Ä–µ–∑ [—Å–µ—Ä–≤–µ—Ä–Ω—ã–π middleware](https://github.com/nuxt/nuxt/blob/c660b39447f0d5b8790c0826092638d321cd6821/packages/nuxt/src/core/runtime/nitro/no-ssr.ts#L8-L9).

### –£–¥–∞–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –≤–µ—Ä—Ö–Ω–µ–≥–æ —É—Ä–æ–≤–Ω—è `generate`

üö¶ **–£—Ä–æ–≤–µ–Ω—å –≤–ª–∏—è–Ω–∏—è**: –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π

#### –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

–û–ø—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –≤–µ—Ä—Ö–Ω–µ–≥–æ —É—Ä–æ–≤–Ω—è `generate` –≤ Nuxt 4 –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞, –≤ —Ç–æ–º —á–∏—Å–ª–µ:

- `generate.exclude` ‚Äî –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–æ–≤ –∏–∑ –ø—Ä–µ—Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞
- `generate.routes` ‚Äî —Å–ø–∏—Å–æ–∫ –º–∞—Ä—à—Ä—É—Ç–æ–≤ –¥–ª—è –ø—Ä–µ—Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞

#### –ü—Ä–∏—á–∏–Ω—ã –∏–∑–º–µ–Ω–µ–Ω–∏–π

`generate` –æ—Å—Ç–∞–ª—Å—è —Å Nuxt 2. –í Nuxt 3+ –ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω—ã–π —Å–ø–æ—Å–æ–± ‚Äî `nitro.prerender`.

#### –®–∞–≥–∏ –º–∏–≥—Ä–∞—Ü–∏–∏

–ó–∞–º–µ–Ω–∏—Ç–µ `generate` –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –æ–ø—Ü–∏–∏ `nitro.prerender`:

```diff
export default defineNuxtConfig({
- generate: {
-   exclude: ['/admin', '/private'],
-   routes: ['/sitemap.xml', '/robots.txt']
- }
+ nitro: {
+   prerender: {
+     ignore: ['/admin', '/private'],
+     routes: ['/sitemap.xml', '/robots.txt']
+   }
+ }
})
```

::read-more{to="https://nitro.build/config#prerender"}
–ü–æ–¥—Ä–æ–±–Ω–µ–µ –æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ prerender –≤ Nitro.
::

## Nuxt 2 –∏ Nuxt 3+

–ö—Ä–∞—Ç–∫–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ç—Ä—ë—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ Nuxt:

| –§—É–Ω–∫—Ü–∏—è / –í–µ—Ä—Å–∏—è        | Nuxt 2     | Nuxt Bridge | Nuxt 3+    |
|-------------------------|------------|-------------|------------|
| Vue                     | 2          | 2           | 3          |
| –°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å            | üòä –°—Ç–∞–±–∏–ª—å–Ω–æ | üòä –°—Ç–∞–±–∏–ª—å–Ω–æ | üòä –°—Ç–∞–±–∏–ª—å–Ω–æ |
| –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å      | üèé –ë—ã—Å—Ç—Ä–æ   | ‚úàÔ∏è –ë—ã—Å—Ç—Ä–µ–µ   | üöÄ –ë—ã—Å—Ç—Ä–µ–µ –≤—Å–µ–≥–æ |
| –î–≤–∏–∂–æ–∫ Nitro            | ‚ùå          | ‚úÖ           | ‚úÖ          |
| –ü–æ–¥–¥–µ—Ä–∂–∫–∞ ESM           | üåô –ß–∞—Å—Ç–∏—á–Ω–æ | üëç –õ—É—á—à–µ    | ‚úÖ          |
| TypeScript              | ‚òëÔ∏è –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ | üöß –ß–∞—Å—Ç–∏—á–Ω–æ | ‚úÖ          |
| Composition API         | ‚ùå          | üöß –ß–∞—Å—Ç–∏—á–Ω–æ | ‚úÖ          |
| Options API             | ‚úÖ          | ‚úÖ           | ‚úÖ          |
| –ê–≤—Ç–æ–∏–º–ø–æ—Ä—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤  | ‚úÖ          | ‚úÖ           | ‚úÖ          |
| –°–∏–Ω—Ç–∞–∫—Å–∏—Å `<script setup>` | ‚ùå       | üöß –ß–∞—Å—Ç–∏—á–Ω–æ | ‚úÖ          |
| –ê–≤—Ç–æ–∏–º–ø–æ—Ä—Ç—ã             | ‚ùå          | ‚úÖ           | ‚úÖ          |
| webpack                 | 4          | 4           | 5          |
| Vite                    | ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–æ | üöß –ß–∞—Å—Ç–∏—á–Ω–æ | ‚úÖ          |
| Nuxt CLI                | ‚ùå –°—Ç–∞—Ä—ã–π  | ‚úÖ nuxt      | ‚úÖ nuxt     |
| –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Å–∞–π—Ç—ã       | ‚úÖ          | ‚úÖ           | ‚úÖ          |

## –ú–∏–≥—Ä–∞—Ü–∏—è —Å Nuxt 2 –Ω–∞ Nuxt 3+

–í —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–µ –ø–æ –º–∏–≥—Ä–∞—Ü–∏–∏ ‚Äî –ø–æ—à–∞–≥–æ–≤–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π Nuxt 2 –∏ Nuxt 3+ –∏ –∞–¥–∞–ø—Ç–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

::read-more{to="/docs/4.x/migration/overview"}
**–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –º–∏–≥—Ä–∞—Ü–∏–∏ —Å Nuxt 2 –Ω–∞ Nuxt 3**
::

## Nuxt 2 –∏ Nuxt Bridge

–î–ª—è –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏ —Å Nuxt 2 –Ω–∞ Nuxt 3 –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Nuxt Bridge ‚Äî —Å–ª–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏, –ø–æ–∑–≤–æ–ª—è—é—â–∏–π –ø–æ–¥–∫–ª—é—á–∞—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ Nuxt 3+ –≤ Nuxt 2 –ø–æ –º–µ—Ä–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏.

::read-more{to="/docs/4.x/bridge/overview"}
**–ú–∏–≥—Ä–∞—Ü–∏—è —Å Nuxt 2 –Ω–∞ Nuxt Bridge**
::
