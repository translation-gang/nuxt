---
title: 'Серверный движок'
description: 'Nuxt работает на новом серверном движке — Nitro.'
---

При создании Nuxt мы разработали новый серверный движок — [Nitro](https://nitro.build/).

В нём реализовано следующее:

- Поддержка разных платформ: Node.js, браузер, service workers и др.
- Готовая поддержка serverless.
- API-маршруты (API routes).
- Автоматический code-splitting и асинхронная загрузка чанков.
- Гибридный режим: статика + serverless.
- Dev-сервер с hot module reloading.

## API-слой

Серверные [API-эндпоинты](/docs/4.x/directory-structure/server#server-routes) и [middleware](/docs/4.x/directory-structure/server#server-middleware) добавляет Nitro, внутри используется [h3](https://github.com/h3js/h3).

Основные возможности:

- Обработчики могут возвращать объекты/массивы — ответ автоматически отдаётся как JSON
- Обработчики могут возвращать промисы, они будут ожидаться (также поддерживаются `res.end()` и `next()`)
- Хелперы для разбора тела запроса, работы с cookie, редиректов, заголовков и т.д.

Подробнее — в [документации h3](https://github.com/h3js/h3).

::read-more{to="/docs/4.x/directory-structure/server#server-routes"}
Подробнее об API-слое в директории `server/`.
::

## Прямые вызовы API

Nitro позволяет «напрямую» вызывать маршруты через глобальный хелпер [`$fetch`](/docs/4.x/api/utils/dollarfetch). В браузере будет выполнен HTTP-запрос к серверу, а на сервере будет вызвана соответствующая функция **без дополнительного сетевого запроса**.

[`$fetch`](/docs/4.x/api/utils/dollarfetch) построен на [ofetch](https://github.com/unjs/ofetch), с возможностями вроде:

- автоматического разбора JSON-ответов (и доступа к сырому ответу при необходимости);
- автоматической обработки тела запроса и параметров с корректными заголовками `Content-Type`.

Подробнее о возможностях `$fetch` — в [ofetch](https://github.com/unjs/ofetch).

## Типизированные API-маршруты

При использовании API-маршрутов (или middleware) Nitro генерирует типы для этих маршрутов, если вы возвращаете значение, а не отправляете ответ через `res.end()`.

Эти типы доступны при использовании [`$fetch()`](/docs/4.x/api/utils/dollarfetch) или [`useFetch()`](/docs/4.x/api/composables/use-fetch).

## Автономный сервер

Nitro собирает автономный серверный дистрибутив, не зависящий от `node_modules`.

В Nuxt 2 сервер не был автономным: для запуска нужна была часть ядра Nuxt через `nuxt start` (пакеты [`nuxt-start`](https://www.npmjs.com/package/nuxt-start) или [`nuxt`](https://www.npmjs.com/package/nuxt)) или программный запуск, что было хрупким и плохо подходило для serverless и service workers.

Nuxt создаёт этот дистрибутив при выполнении `nuxt build` в директорию [`.output`](/docs/4.x/directory-structure/output).

В вывод входит runtime-код для запуска Nuxt-сервера в любой среде (включая экспериментальные browser service workers) и раздачи статики — это делает Nuxt полноценным гибридным фреймворком для JAMstack. Кроме того, в Nuxt есть встроенный слой хранилища с поддержкой нескольких источников и локальных ассетов.

::read-more{icon="i-simple-icons-github" to="https://github.com/nitrojs/nitro" target="_blank"}
Подробнее о движке Nitro на GitHub.
::
