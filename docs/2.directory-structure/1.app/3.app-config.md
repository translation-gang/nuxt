---
title: app.config.ts
head.title: 'app.config.ts'
description: Реактивная конфигурация приложения через файл App Config.
navigation.icon: i-vscode-icons-file-type-light-config
---

В Nuxt файл `app/app.config.ts` задаёт реактивную конфигурацию приложения; её можно обновлять в рантайме в хуках жизненного цикла или через плагин, с поддержкой HMR.

Расширения файла: `.ts`, `.js` или `.mjs`.

```ts twoslash [app/app.config.ts]
export default defineAppConfig({
  foo: 'bar',
})
```

::caution
Не помещайте секреты в `app.config` — он попадает в клиентский бандл.
::

::note
При кастомном [`srcDir`](/docs/4.x/api/nuxt-config#srcdir) файл `app.config` должен находиться в корне этого пути.
::

## Использование

Чтобы выставить конфиг и переменные окружения для приложения, определите их в `app.config`:

```ts twoslash [app/app.config.ts]
export default defineAppConfig({
  theme: {
    primaryColor: '#ababab',
  },
})
```

`theme` будет доступен и при серверном рендере, и в браузере через композабл [`useAppConfig`](/docs/4.x/api/composables/use-app-config).

```vue [app/pages/index.vue]
<script setup lang="ts">
const appConfig = useAppConfig()

console.log(appConfig.theme)
</script>
```

Утилита [`updateAppConfig`](/docs/4.x/api/utils/update-app-config) обновляет `app.config` в рантайме.

```vue [app/pages/index.vue]
<script setup>
const appConfig = useAppConfig() // { foo: 'bar' }

const newAppConfig = { foo: 'baz' }

updateAppConfig(newAppConfig)

console.log(appConfig) // { foo: 'baz' }
</script>
```

::read-more{to="/docs/4.x/api/utils/update-app-config"}
Подробнее об утилите `updateAppConfig`.
::

## Типизация App Config

Nuxt пытается автоматически вывести TypeScript-интерфейс из `app.config`. При необходимости типы можно задать вручную.

### Входной App Config (AppConfigInput)

`AppConfigInput` нужен авторам модулей, чтобы описать допустимые _входные_ опции при задании app config. На тип результата `useAppConfig()` это не влияет.

```ts [index.d.ts]
declare module 'nuxt/schema' {
  interface AppConfigInput {
    /** Конфигурация темы */
    theme?: {
      /** Основной цвет приложения */
      primaryColor?: string
    }
  }
}

// При расширении типов нужен import/export
export {}
```

### Выходной App Config (AppConfig)

Чтобы типизировать результат [`useAppConfig()`](/docs/4.x/api/composables/use-app-config), расширяйте интерфейс `AppConfig`.

::warning
При типизации `AppConfig` вы перезаписываете типы, которые Nuxt выводит из вашего app.config.
::

```ts [index.d.ts]
declare module 'nuxt/schema' {
  interface AppConfig {
    // Это полностью заменит выведенное свойство theme
    theme: {
      primaryColor?: 'red' | 'blue'
    }
  }
}

export {}
```

## Стратегия слияния

В [слоях](/docs/4.x/getting-started/layers) Nuxt использует свою стратегию слияния для `AppConfig` через [Function Merger](https://github.com/unjs/defu#function-merger): для каждого ключа с массивом можно задать свою функцию слияния.

::note
Function merger доступен только в расширяющих слоях, не в основном `app.config` проекта.
::

Пример:

::code-group

```ts twoslash [layer/app/app.config.ts]
export default defineAppConfig({
  array: ['hello'],
})
```

```ts twoslash [app/app.config.ts]
export default defineAppConfig({
  array: () => ['bonjour'],
})
```

::

## Ограничения

Начиная с Nuxt v3.3, `app.config.ts` используется и в Nitro, из-за чего:

1. В `app.config.ts` нельзя импортировать Vue-компоненты.
2. Часть автоимпортов недоступна в контексте Nitro.

Nitro обрабатывает app config без полной поддержки Vue.

Обход через Vite-плагины в конфиге Nitro возможен, но не рекомендуется:

```ts [nuxt.config.ts]
export default defineNuxtConfig({
  nitro: {
    vite: {
      plugins: [vue()],
    },
  },
})
```

::warning
Такой обход может привести к неожиданному поведению и багам. Vue — один из плагинов, которые не рассчитаны на контекст Nitro.
::

Связанные issues:
- [Issue #19858](https://github.com/nuxt/nuxt/issues/19858)
- [Issue #19854](https://github.com/nuxt/nuxt/issues/19854)

::note
В Nitro v3 эти ограничения планируется снять, убрав поддержку app config в Nitro. Прогресс: [этот PR](https://github.com/nitrojs/nitro/pull/2521).
::
